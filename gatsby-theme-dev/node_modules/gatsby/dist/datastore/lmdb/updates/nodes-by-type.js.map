{"version":3,"file":"nodes-by-type.js","names":["updateNodesByType","nodesByTypeDb","action","type","put","payload","internal","id","remove"],"sources":["../../../../src/datastore/lmdb/updates/nodes-by-type.ts"],"sourcesContent":["import { ActionsUnion } from \"../../../redux/types\"\nimport { ILmdbDatabases } from \"../../types\"\n\nexport function updateNodesByType(\n  nodesByTypeDb: ILmdbDatabases[\"nodesByType\"],\n  action: ActionsUnion\n): Promise<boolean> | boolean {\n  switch (action.type) {\n    case `CREATE_NODE`:\n    case `ADD_FIELD_TO_NODE`:\n    case `ADD_CHILD_NODE_TO_PARENT_NODE`: {\n      // nodesByType db uses dupSort, so `put` will effectively append an id\n      return nodesByTypeDb.put(action.payload.internal.type, action.payload.id)\n    }\n    case `DELETE_NODE`: {\n      return action.payload\n        ? nodesByTypeDb.remove(action.payload.internal.type, action.payload.id)\n        : false\n    }\n  }\n  return false\n}\n"],"mappings":";;;;;AAGO,SAASA,iBAAT,CACLC,aADK,EAELC,MAFK,EAGuB;EAC5B,QAAQA,MAAM,CAACC,IAAf;IACE,KAAM,aAAN;IACA,KAAM,mBAAN;IACA,KAAM,+BAAN;MAAsC;QACpC;QACA,OAAOF,aAAa,CAACG,GAAd,CAAkBF,MAAM,CAACG,OAAP,CAAeC,QAAf,CAAwBH,IAA1C,EAAgDD,MAAM,CAACG,OAAP,CAAeE,EAA/D,CAAP;MACD;;IACD,KAAM,aAAN;MAAoB;QAClB,OAAOL,MAAM,CAACG,OAAP,GACHJ,aAAa,CAACO,MAAd,CAAqBN,MAAM,CAACG,OAAP,CAAeC,QAAf,CAAwBH,IAA7C,EAAmDD,MAAM,CAACG,OAAP,CAAeE,EAAlE,CADG,GAEH,KAFJ;MAGD;EAXH;;EAaA,OAAO,KAAP;AACD"}