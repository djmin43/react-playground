{"version":3,"file":"visited-page.js","names":["createDefault","defaults","Set","add","state","Map","visitedPagesReducer","action","type","server","get","payload","componentChunkName"],"sources":["../../../src/redux/reducers/visited-page.ts"],"sourcesContent":["import {\n  IGatsbyState,\n  IDeleteCacheAction,\n  ICreateServerVisitedPage,\n} from \"../types\"\n\ntype StateMap = Map<\"server\", Set<string>>\n\n// The develop server always wants these page components.\nconst createDefault = (): StateMap => {\n  const defaults = new Set<string>()\n  defaults.add(`component---cache-dev-404-page-js`)\n  defaults.add(`component---src-pages-404-js`)\n  defaults.add(`component---src-pages-index-js`)\n\n  const state: StateMap = new Map([[`server`, new Set(defaults)]])\n\n  return state\n}\n\nexport const visitedPagesReducer = (\n  state: IGatsbyState[\"visitedPages\"] = createDefault(),\n  action: IDeleteCacheAction | ICreateServerVisitedPage\n): IGatsbyState[\"visitedPages\"] => {\n  switch (action.type) {\n    case `DELETE_CACHE`:\n      return createDefault()\n\n    case `CREATE_SERVER_VISITED_PAGE`: {\n      const server = state.get(`server`)\n      if (server) {\n        server.add(action.payload.componentChunkName)\n      }\n\n      return state\n    }\n\n    default:\n      return state\n  }\n}\n"],"mappings":";;;;;AAQA;AACA,MAAMA,aAAa,GAAG,MAAgB;EACpC,MAAMC,QAAQ,GAAG,IAAIC,GAAJ,EAAjB;EACAD,QAAQ,CAACE,GAAT,CAAc,mCAAd;EACAF,QAAQ,CAACE,GAAT,CAAc,8BAAd;EACAF,QAAQ,CAACE,GAAT,CAAc,gCAAd;EAEA,MAAMC,KAAe,GAAG,IAAIC,GAAJ,CAAQ,CAAC,CAAE,QAAF,EAAW,IAAIH,GAAJ,CAAQD,QAAR,CAAX,CAAD,CAAR,CAAxB;EAEA,OAAOG,KAAP;AACD,CATD;;AAWO,MAAME,mBAAmB,GAAG,CACjCF,KAAmC,GAAGJ,aAAa,EADlB,EAEjCO,MAFiC,KAGA;EACjC,QAAQA,MAAM,CAACC,IAAf;IACE,KAAM,cAAN;MACE,OAAOR,aAAa,EAApB;;IAEF,KAAM,4BAAN;MAAmC;QACjC,MAAMS,MAAM,GAAGL,KAAK,CAACM,GAAN,CAAW,QAAX,CAAf;;QACA,IAAID,MAAJ,EAAY;UACVA,MAAM,CAACN,GAAP,CAAWI,MAAM,CAACI,OAAP,CAAeC,kBAA1B;QACD;;QAED,OAAOR,KAAP;MACD;;IAED;MACE,OAAOA,KAAP;EAdJ;AAgBD,CApBM"}