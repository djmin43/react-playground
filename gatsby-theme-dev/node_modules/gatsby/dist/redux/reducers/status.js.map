{"version":3,"file":"status.js","names":["defaultState","PLUGINS_HASH","LAST_NODE_COUNTER","plugins","statusReducer","state","action","type","payload","plugin","name","Error","JSON","stringify","internal","counter"],"sources":["../../../src/redux/reducers/status.ts"],"sourcesContent":["import _ from \"lodash\"\nimport { ActionsUnion, IGatsbyState } from \"../types\"\n\nconst defaultState: IGatsbyState[\"status\"] = {\n  PLUGINS_HASH: ``,\n  LAST_NODE_COUNTER: 0,\n  plugins: {},\n}\n\nexport const statusReducer = (\n  state: IGatsbyState[\"status\"] = defaultState,\n  action: ActionsUnion\n): IGatsbyState[\"status\"] => {\n  switch (action.type) {\n    case `DELETE_CACHE`:\n      return defaultState\n    case `UPDATE_PLUGINS_HASH`:\n      return {\n        ...state,\n        PLUGINS_HASH: action.payload,\n      }\n    case `SET_PLUGIN_STATUS`:\n      if (!action.plugin || !action.plugin?.name) {\n        throw new Error(`You can't set plugin status without a plugin`)\n      }\n      if (!_.isObject(action.payload)) {\n        throw new Error(\n          `You must pass an object into setPluginStatus. What was passed in was ${JSON.stringify(\n            action.payload,\n            null,\n            4\n          )}`\n        )\n      }\n      return {\n        ...state,\n        plugins: {\n          ...state.plugins,\n          [action.plugin.name]: _.merge(\n            {},\n            state.plugins[action.plugin.name],\n            action.payload\n          ),\n        },\n      }\n    case `CREATE_NODE`:\n      state.LAST_NODE_COUNTER = action.payload.internal.counter\n      return state\n    default:\n      return state\n  }\n}\n"],"mappings":";;;;;;;;;;;AAGA,MAAMA,YAAoC,GAAG;EAC3CC,YAAY,EAAG,EAD4B;EAE3CC,iBAAiB,EAAE,CAFwB;EAG3CC,OAAO,EAAE;AAHkC,CAA7C;;AAMO,MAAMC,aAAa,GAAG,CAC3BC,KAA6B,GAAGL,YADL,EAE3BM,MAF2B,KAGA;EAAA;;EAC3B,QAAQA,MAAM,CAACC,IAAf;IACE,KAAM,cAAN;MACE,OAAOP,YAAP;;IACF,KAAM,qBAAN;MACE,OAAO,EACL,GAAGK,KADE;QAELJ,YAAY,EAAEK,MAAM,CAACE;MAFhB,CAAP;;IAIF,KAAM,mBAAN;MACE,IAAI,CAACF,MAAM,CAACG,MAAR,IAAkB,oBAACH,MAAM,CAACG,MAAR,2CAAC,eAAeC,IAAhB,CAAtB,EAA4C;QAC1C,MAAM,IAAIC,KAAJ,CAAW,8CAAX,CAAN;MACD;;MACD,IAAI,CAAC,wBAAWL,MAAM,CAACE,OAAlB,CAAL,EAAiC;QAC/B,MAAM,IAAIG,KAAJ,CACH,wEAAuEC,IAAI,CAACC,SAAL,CACtEP,MAAM,CAACE,OAD+D,EAEtE,IAFsE,EAGtE,CAHsE,CAItE,EALE,CAAN;MAOD;;MACD,OAAO,EACL,GAAGH,KADE;QAELF,OAAO,EAAE,EACP,GAAGE,KAAK,CAACF,OADF;UAEP,CAACG,MAAM,CAACG,MAAP,CAAcC,IAAf,GAAsB,qBACpB,EADoB,EAEpBL,KAAK,CAACF,OAAN,CAAcG,MAAM,CAACG,MAAP,CAAcC,IAA5B,CAFoB,EAGpBJ,MAAM,CAACE,OAHa;QAFf;MAFJ,CAAP;;IAWF,KAAM,aAAN;MACEH,KAAK,CAACH,iBAAN,GAA0BI,MAAM,CAACE,OAAP,CAAeM,QAAf,CAAwBC,OAAlD;MACA,OAAOV,KAAP;;IACF;MACE,OAAOA,KAAP;EApCJ;AAsCD,CA1CM"}