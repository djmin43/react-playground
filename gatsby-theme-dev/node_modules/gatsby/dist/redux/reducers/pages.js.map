{"version":3,"file":"pages.js","names":["pagesReducer","state","Map","action","type","plugin","name","console","log","error","JSON","stringify","Error","set","payload","path","delete","page","get","mode","pageMode"],"sources":["../../../src/redux/reducers/pages.ts"],"sourcesContent":["import {\n  IGatsbyState,\n  IGatsbyPage,\n  IDeleteCacheAction,\n  ICreatePageAction,\n  IDeletePageAction,\n  IMaterializePageMode,\n} from \"../types\"\n\nexport const pagesReducer = (\n  state: IGatsbyState[\"pages\"] = new Map<string, IGatsbyPage>(),\n  action:\n    | IDeleteCacheAction\n    | ICreatePageAction\n    | IDeletePageAction\n    | IMaterializePageMode\n): IGatsbyState[\"pages\"] => {\n  switch (action.type) {\n    case `DELETE_CACHE`:\n      return new Map()\n\n    case `CREATE_PAGE`: {\n      // throws an error if the page is not created by a plugin\n      if (!action.plugin?.name) {\n        console.log(``)\n        console.error(JSON.stringify(action, null, 4))\n        console.log(``)\n\n        throw new Error(\n          `Pages can only be created by plugins. There wasn't a plugin set when creating this page.`\n        )\n      }\n\n      // Add page to the state with the path as key\n      state.set(action.payload.path, action.payload)\n\n      return state\n    }\n\n    case `DELETE_PAGE`: {\n      state.delete(action.payload.path)\n\n      return state\n    }\n\n    case `MATERIALIZE_PAGE_MODE`: {\n      const page = state.get(action.payload.path)\n      if (!page) {\n        throw new Error(`Could not find page by path: ${action.payload.path}`)\n      }\n      page.mode = action.payload.pageMode\n      return state\n    }\n\n    default:\n      return state\n  }\n}\n"],"mappings":";;;;;AASO,MAAMA,YAAY,GAAG,CAC1BC,KAA4B,GAAG,IAAIC,GAAJ,EADL,EAE1BC,MAF0B,KAOA;EAC1B,QAAQA,MAAM,CAACC,IAAf;IACE,KAAM,cAAN;MACE,OAAO,IAAIF,GAAJ,EAAP;;IAEF,KAAM,aAAN;MAAoB;QAAA;;QAClB;QACA,IAAI,oBAACC,MAAM,CAACE,MAAR,2CAAC,eAAeC,IAAhB,CAAJ,EAA0B;UACxBC,OAAO,CAACC,GAAR,CAAa,EAAb;UACAD,OAAO,CAACE,KAAR,CAAcC,IAAI,CAACC,SAAL,CAAeR,MAAf,EAAuB,IAAvB,EAA6B,CAA7B,CAAd;UACAI,OAAO,CAACC,GAAR,CAAa,EAAb;UAEA,MAAM,IAAII,KAAJ,CACH,0FADG,CAAN;QAGD,CAViB,CAYlB;;;QACAX,KAAK,CAACY,GAAN,CAAUV,MAAM,CAACW,OAAP,CAAeC,IAAzB,EAA+BZ,MAAM,CAACW,OAAtC;QAEA,OAAOb,KAAP;MACD;;IAED,KAAM,aAAN;MAAoB;QAClBA,KAAK,CAACe,MAAN,CAAab,MAAM,CAACW,OAAP,CAAeC,IAA5B;QAEA,OAAOd,KAAP;MACD;;IAED,KAAM,uBAAN;MAA8B;QAC5B,MAAMgB,IAAI,GAAGhB,KAAK,CAACiB,GAAN,CAAUf,MAAM,CAACW,OAAP,CAAeC,IAAzB,CAAb;;QACA,IAAI,CAACE,IAAL,EAAW;UACT,MAAM,IAAIL,KAAJ,CAAW,gCAA+BT,MAAM,CAACW,OAAP,CAAeC,IAAK,EAA9D,CAAN;QACD;;QACDE,IAAI,CAACE,IAAL,GAAYhB,MAAM,CAACW,OAAP,CAAeM,QAA3B;QACA,OAAOnB,KAAP;MACD;;IAED;MACE,OAAOA,KAAP;EAtCJ;AAwCD,CAhDM"}