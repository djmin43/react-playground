{"version":3,"file":"schema-customization.js","names":["initialState","composer","context","fieldExtensions","printConfig","thirdPartySchemas","types","schemaCustomizationReducer","state","action","type","payload","Array","isArray","map","typeOrTypeDef","plugin","extension","name","path","include","exclude","withFieldTypes"],"sources":["../../../src/redux/reducers/schema-customization.ts"],"sourcesContent":["import { IGatsbyState, ActionsUnion } from \"../types\"\n\nconst initialState = (): IGatsbyState[\"schemaCustomization\"] => {\n  return {\n    composer: null,\n    context: {},\n    fieldExtensions: {},\n    printConfig: null,\n    thirdPartySchemas: [],\n    types: [],\n  }\n}\n\nexport const schemaCustomizationReducer = (\n  state: IGatsbyState[\"schemaCustomization\"] = initialState(),\n  action: ActionsUnion\n): IGatsbyState[\"schemaCustomization\"] => {\n  switch (action.type) {\n    case `ADD_THIRD_PARTY_SCHEMA`:\n      return {\n        ...state,\n        thirdPartySchemas: [...state.thirdPartySchemas, action.payload],\n      }\n    case `SET_SCHEMA_COMPOSER`:\n      return {\n        ...state,\n        composer: action.payload,\n      }\n    case `CREATE_TYPES`: {\n      let types: IGatsbyState[\"schemaCustomization\"][\"types\"]\n      if (Array.isArray(action.payload)) {\n        types = [\n          ...state.types,\n          ...action.payload.map(typeOrTypeDef => {\n            return {\n              typeOrTypeDef,\n              plugin: action.plugin,\n            }\n          }),\n        ]\n      } else {\n        types = [\n          ...state.types,\n          { typeOrTypeDef: action.payload, plugin: action.plugin },\n        ]\n      }\n      return {\n        ...state,\n        types,\n      }\n    }\n    case `CREATE_FIELD_EXTENSION`: {\n      const { extension, name } = action.payload\n      return {\n        ...state,\n        fieldExtensions: { ...state.fieldExtensions, [name]: extension },\n      }\n    }\n    case `PRINT_SCHEMA_REQUESTED`: {\n      const { path, include, exclude, withFieldTypes } = action.payload\n      return {\n        ...state,\n        printConfig: {\n          path,\n          include,\n          exclude,\n          withFieldTypes,\n        },\n      }\n    }\n    case `CREATE_RESOLVER_CONTEXT`: {\n      const context = action.payload\n      return {\n        ...state,\n        context: { ...state.context, ...context },\n      }\n    }\n    case `CLEAR_SCHEMA_CUSTOMIZATION`:\n      return {\n        ...initialState(),\n        composer: state.composer,\n      }\n    case `DELETE_CACHE`:\n      return initialState()\n    default:\n      return state\n  }\n}\n"],"mappings":";;;;;AAEA,MAAMA,YAAY,GAAG,MAA2C;EAC9D,OAAO;IACLC,QAAQ,EAAE,IADL;IAELC,OAAO,EAAE,EAFJ;IAGLC,eAAe,EAAE,EAHZ;IAILC,WAAW,EAAE,IAJR;IAKLC,iBAAiB,EAAE,EALd;IAMLC,KAAK,EAAE;EANF,CAAP;AAQD,CATD;;AAWO,MAAMC,0BAA0B,GAAG,CACxCC,KAA0C,GAAGR,YAAY,EADjB,EAExCS,MAFwC,KAGA;EACxC,QAAQA,MAAM,CAACC,IAAf;IACE,KAAM,wBAAN;MACE,OAAO,EACL,GAAGF,KADE;QAELH,iBAAiB,EAAE,CAAC,GAAGG,KAAK,CAACH,iBAAV,EAA6BI,MAAM,CAACE,OAApC;MAFd,CAAP;;IAIF,KAAM,qBAAN;MACE,OAAO,EACL,GAAGH,KADE;QAELP,QAAQ,EAAEQ,MAAM,CAACE;MAFZ,CAAP;;IAIF,KAAM,cAAN;MAAqB;QACnB,IAAIL,KAAJ;;QACA,IAAIM,KAAK,CAACC,OAAN,CAAcJ,MAAM,CAACE,OAArB,CAAJ,EAAmC;UACjCL,KAAK,GAAG,CACN,GAAGE,KAAK,CAACF,KADH,EAEN,GAAGG,MAAM,CAACE,OAAP,CAAeG,GAAf,CAAmBC,aAAa,IAAI;YACrC,OAAO;cACLA,aADK;cAELC,MAAM,EAAEP,MAAM,CAACO;YAFV,CAAP;UAID,CALE,CAFG,CAAR;QASD,CAVD,MAUO;UACLV,KAAK,GAAG,CACN,GAAGE,KAAK,CAACF,KADH,EAEN;YAAES,aAAa,EAAEN,MAAM,CAACE,OAAxB;YAAiCK,MAAM,EAAEP,MAAM,CAACO;UAAhD,CAFM,CAAR;QAID;;QACD,OAAO,EACL,GAAGR,KADE;UAELF;QAFK,CAAP;MAID;;IACD,KAAM,wBAAN;MAA+B;QAC7B,MAAM;UAAEW,SAAF;UAAaC;QAAb,IAAsBT,MAAM,CAACE,OAAnC;QACA,OAAO,EACL,GAAGH,KADE;UAELL,eAAe,EAAE,EAAE,GAAGK,KAAK,CAACL,eAAX;YAA4B,CAACe,IAAD,GAAQD;UAApC;QAFZ,CAAP;MAID;;IACD,KAAM,wBAAN;MAA+B;QAC7B,MAAM;UAAEE,IAAF;UAAQC,OAAR;UAAiBC,OAAjB;UAA0BC;QAA1B,IAA6Cb,MAAM,CAACE,OAA1D;QACA,OAAO,EACL,GAAGH,KADE;UAELJ,WAAW,EAAE;YACXe,IADW;YAEXC,OAFW;YAGXC,OAHW;YAIXC;UAJW;QAFR,CAAP;MASD;;IACD,KAAM,yBAAN;MAAgC;QAC9B,MAAMpB,OAAO,GAAGO,MAAM,CAACE,OAAvB;QACA,OAAO,EACL,GAAGH,KADE;UAELN,OAAO,EAAE,EAAE,GAAGM,KAAK,CAACN,OAAX;YAAoB,GAAGA;UAAvB;QAFJ,CAAP;MAID;;IACD,KAAM,4BAAN;MACE,OAAO,EACL,GAAGF,YAAY,EADV;QAELC,QAAQ,EAAEO,KAAK,CAACP;MAFX,CAAP;;IAIF,KAAM,cAAN;MACE,OAAOD,YAAY,EAAnB;;IACF;MACE,OAAOQ,KAAP;EApEJ;AAsED,CA1EM"}