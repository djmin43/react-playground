{"version":3,"file":"telemetry.js","names":["initialState","gatsbyImageSourceUrls","Set","telemetryReducer","state","action","type","sourceUrl","payload","add","queryStateTelemetryChunk","urlsFromWorker","forEach","url"],"sources":["../../../src/redux/reducers/telemetry.ts"],"sourcesContent":["import { ActionsUnion, IGatsbyState } from \"../types\"\n\nconst initialState = {\n  gatsbyImageSourceUrls: new Set<string>(),\n}\n\nexport const telemetryReducer = (\n  state: IGatsbyState[\"telemetry\"] = initialState,\n  action: ActionsUnion\n): IGatsbyState[\"telemetry\"] => {\n  switch (action.type) {\n    case `PROCESS_GATSBY_IMAGE_SOURCE_URL`: {\n      const { sourceUrl } = action.payload\n      state.gatsbyImageSourceUrls.add(sourceUrl)\n      return state\n    }\n    case `CLEAR_GATSBY_IMAGE_SOURCE_URL`: {\n      state.gatsbyImageSourceUrls = new Set<string>()\n      return state\n    }\n    case `MERGE_WORKER_QUERY_STATE`: {\n      const { queryStateTelemetryChunk } = action.payload\n\n      // This action may be dispatched in cases where queries might not be included in the merge data\n      if (!queryStateTelemetryChunk) {\n        return state\n      }\n\n      const urlsFromWorker =\n        queryStateTelemetryChunk.gatsbyImageSourceUrls || new Set<string>()\n\n      urlsFromWorker.forEach(url => {\n        state.gatsbyImageSourceUrls.add(url)\n      })\n\n      return state\n    }\n    default: {\n      return state\n    }\n  }\n}\n"],"mappings":";;;;AAEA,MAAMA,YAAY,GAAG;EACnBC,qBAAqB,EAAE,IAAIC,GAAJ;AADJ,CAArB;;AAIO,MAAMC,gBAAgB,GAAG,CAC9BC,KAAgC,GAAGJ,YADL,EAE9BK,MAF8B,KAGA;EAC9B,QAAQA,MAAM,CAACC,IAAf;IACE,KAAM,iCAAN;MAAwC;QACtC,MAAM;UAAEC;QAAF,IAAgBF,MAAM,CAACG,OAA7B;QACAJ,KAAK,CAACH,qBAAN,CAA4BQ,GAA5B,CAAgCF,SAAhC;QACA,OAAOH,KAAP;MACD;;IACD,KAAM,+BAAN;MAAsC;QACpCA,KAAK,CAACH,qBAAN,GAA8B,IAAIC,GAAJ,EAA9B;QACA,OAAOE,KAAP;MACD;;IACD,KAAM,0BAAN;MAAiC;QAC/B,MAAM;UAAEM;QAAF,IAA+BL,MAAM,CAACG,OAA5C,CAD+B,CAG/B;;QACA,IAAI,CAACE,wBAAL,EAA+B;UAC7B,OAAON,KAAP;QACD;;QAED,MAAMO,cAAc,GAClBD,wBAAwB,CAACT,qBAAzB,IAAkD,IAAIC,GAAJ,EADpD;QAGAS,cAAc,CAACC,OAAf,CAAuBC,GAAG,IAAI;UAC5BT,KAAK,CAACH,qBAAN,CAA4BQ,GAA5B,CAAgCI,GAAhC;QACD,CAFD;QAIA,OAAOT,KAAP;MACD;;IACD;MAAS;QACP,OAAOA,KAAP;MACD;EA7BH;AA+BD,CAnCM"}