{"version":3,"file":"normalize.js","names":["normalizePlugin","plugin","resolve","options","plugins","normalizePlugins","map","normalizeConfig","config"],"sources":["../../../../src/bootstrap/load-plugins/utils/normalize.ts"],"sourcesContent":["import { ISiteConfig, IRawSiteConfig } from \"../types\"\nimport { IPluginRefObject, PluginRef } from \"gatsby-plugin-utils/dist/types\"\n\nexport function normalizePlugin(\n  plugin: IPluginRefObject | string\n): IPluginRefObject {\n  if (typeof plugin === `string`) {\n    return {\n      resolve: plugin,\n      options: {},\n    }\n  }\n\n  if (plugin.options?.plugins) {\n    plugin.options = {\n      ...plugin.options,\n      plugins: normalizePlugins(plugin.options.plugins),\n    }\n  }\n\n  return plugin\n}\n\nexport function normalizePlugins(\n  plugins?: Array<PluginRef>\n): Array<IPluginRefObject> {\n  return (plugins || []).map(normalizePlugin)\n}\n\nexport const normalizeConfig = (config: IRawSiteConfig = {}): ISiteConfig => {\n  return {\n    ...config,\n    plugins: (config.plugins || []).map(normalizePlugin),\n  }\n}\n"],"mappings":";;;;;;;AAGO,SAASA,eAAT,CACLC,MADK,EAEa;EAAA;;EAClB,IAAI,OAAOA,MAAP,KAAmB,QAAvB,EAAgC;IAC9B,OAAO;MACLC,OAAO,EAAED,MADJ;MAELE,OAAO,EAAE;IAFJ,CAAP;EAID;;EAED,uBAAIF,MAAM,CAACE,OAAX,4CAAI,gBAAgBC,OAApB,EAA6B;IAC3BH,MAAM,CAACE,OAAP,GAAiB,EACf,GAAGF,MAAM,CAACE,OADK;MAEfC,OAAO,EAAEC,gBAAgB,CAACJ,MAAM,CAACE,OAAP,CAAeC,OAAhB;IAFV,CAAjB;EAID;;EAED,OAAOH,MAAP;AACD;;AAEM,SAASI,gBAAT,CACLD,OADK,EAEoB;EACzB,OAAO,CAACA,OAAO,IAAI,EAAZ,EAAgBE,GAAhB,CAAoBN,eAApB,CAAP;AACD;;AAEM,MAAMO,eAAe,GAAG,CAACC,MAAsB,GAAG,EAA1B,KAA8C;EAC3E,OAAO,EACL,GAAGA,MADE;IAELJ,OAAO,EAAE,CAACI,MAAM,CAACJ,OAAP,IAAkB,EAAnB,EAAuBE,GAAvB,CAA2BN,eAA3B;EAFJ,CAAP;AAID,CALM"}