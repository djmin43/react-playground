{"version":3,"file":"develop-static.js","names":["developStatic","root","options","expressStatic","express","static","req","res","next","includes","method","path","parseUrl","pathname","parsedPath","sysPath","parse","ext"],"sources":["../../src/commands/develop-static.ts"],"sourcesContent":["import sysPath from \"path\"\nimport express from \"express\"\nimport { ServeStaticOptions } from \"serve-static\"\nimport parseUrl from \"parseurl\"\n\nexport function developStatic(\n  root: string,\n  options: ServeStaticOptions\n): express.Handler {\n  const expressStatic = express.static(root, options)\n\n  return function (\n    req: express.Request,\n    res: express.Response,\n    next: express.NextFunction\n  ): typeof expressStatic | void {\n    if ([`GET`, `HEAD`].includes(req.method)) {\n      const path = parseUrl(req).pathname\n      const parsedPath = sysPath.parse(path)\n      if ([`.htm`, `.html`].includes(parsedPath.ext)) {\n        return next()\n      }\n    }\n\n    return expressStatic(req, res, next)\n  }\n}\n"],"mappings":";;;;;;;AAAA;;AACA;;AAEA;;AAEO,SAASA,aAAT,CACLC,IADK,EAELC,OAFK,EAGY;EACjB,MAAMC,aAAa,GAAGC,gBAAA,CAAQC,MAAR,CAAeJ,IAAf,EAAqBC,OAArB,CAAtB;;EAEA,OAAO,UACLI,GADK,EAELC,GAFK,EAGLC,IAHK,EAIwB;IAC7B,IAAI,CAAE,KAAF,EAAS,MAAT,EAAgBC,QAAhB,CAAyBH,GAAG,CAACI,MAA7B,CAAJ,EAA0C;MACxC,MAAMC,IAAI,GAAG,IAAAC,iBAAA,EAASN,GAAT,EAAcO,QAA3B;;MACA,MAAMC,UAAU,GAAGC,aAAA,CAAQC,KAAR,CAAcL,IAAd,CAAnB;;MACA,IAAI,CAAE,MAAF,EAAU,OAAV,EAAkBF,QAAlB,CAA2BK,UAAU,CAACG,GAAtC,CAAJ,EAAgD;QAC9C,OAAOT,IAAI,EAAX;MACD;IACF;;IAED,OAAOL,aAAa,CAACG,GAAD,EAAMC,GAAN,EAAWC,IAAX,CAApB;EACD,CAdD;AAeD"}