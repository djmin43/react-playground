{"version":3,"file":"load-config-and-plugins.js","names":["loadConfigAndPlugins","args","siteDirectory","program","store","dispatch","type","payload","directory","config","loadConfig","loadPlugins","apiRunnerNode"],"sources":["../../../../src/utils/worker/child/load-config-and-plugins.ts"],"sourcesContent":["import { loadConfig } from \"../../../bootstrap/load-config\"\nimport { loadPlugins } from \"../../../bootstrap/load-plugins\"\nimport { store } from \"../../../redux\"\nimport apiRunnerNode from \"../../api-runner-node\"\n\nexport async function loadConfigAndPlugins(\n  ...args: Parameters<typeof loadConfig>\n): Promise<void> {\n  const [{ siteDirectory, program }] = args\n\n  store.dispatch({\n    type: `SET_PROGRAM`,\n    payload: {\n      ...program,\n      directory: siteDirectory,\n    },\n  })\n  const config = await loadConfig(...args)\n  await loadPlugins(config, siteDirectory)\n\n  // Cache is already initialized\n  if (_CFLAGS_.GATSBY_MAJOR === `4`) {\n    await apiRunnerNode(`onPluginInit`)\n  } else {\n    await apiRunnerNode(`unstable_onPluginInit`)\n  }\n}\n"],"mappings":";;;;;;;AAAA;;AACA;;AACA;;AACA;;AAEO,eAAeA,oBAAf,CACL,GAAGC,IADE,EAEU;EACf,MAAM,CAAC;IAAEC,aAAF;IAAiBC;EAAjB,CAAD,IAA+BF,IAArC;;EAEAG,YAAA,CAAMC,QAAN,CAAe;IACbC,IAAI,EAAG,aADM;IAEbC,OAAO,EAAE,EACP,GAAGJ,OADI;MAEPK,SAAS,EAAEN;IAFJ;EAFI,CAAf;;EAOA,MAAMO,MAAM,GAAG,MAAM,IAAAC,sBAAA,EAAW,GAAGT,IAAd,CAArB;EACA,MAAM,IAAAU,wBAAA,EAAYF,MAAZ,EAAoBP,aAApB,CAAN,CAXe,CAaf;;EACA,IAAI,QAA2B,GAA/B,EAAmC;IACjC,MAAM,IAAAU,sBAAA,EAAe,cAAf,CAAN;EACD,CAFD,MAEO;IACL,MAAM,IAAAA,sBAAA,EAAe,uBAAf,CAAN;EACD;AACF"}