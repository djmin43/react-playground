{"version":3,"file":"webpack-utils.js","names":["vendorRegex","createWebpackUtils","stage","program","assetRelativeRoot","supportedBrowsers","getBrowsersList","directory","PRODUCTION","includes","isSSR","config","store","getState","makeExternalOnly","original","options","rule","include","makeInternalOnly","exclude","loaders","json","loader","require","resolve","yaml","null","raw","style","miniCssExtract","moduleOptions","undefined","modules","restOptions","namedExport","MiniCssExtractPlugin","css","modulesOptions","auto","localIdentName","exportLocalsConvention","exportOnlyLocals","url","startsWith","sourceMap","postcss","plugins","overrideBrowserslist","postcssOpts","execute","postcssOptions","loaderContext","postCSSPlugins","autoprefixerPlugin","autoprefixer","flexbox","find","plugin","postcssPlugin","unshift","flexbugs","file","name","limit","fallback","js","reactRuntime","jsxRuntime","reactImportSource","jsxImportSource","cacheDirectory","path","join","rootDir","dependencies","rules","modulesThatUseGatsby","test","modulePath","some","module","type","use","resourceQuery","issuer","configFile","compact","isPageTemplate","jsOptions","babelrc","presets","sourceMaps","cacheIdentifier","JSON","stringify","browsersList","gatsbyPreset","version","VENDORS_TO_NOT_POLYFILL","doNotPolyfillRegex","RegExp","fonts","images","media","miscAssets","browsers","importLoaders","filter","Boolean","internal","external","cssModules","builtinPlugins","minifyJs","terserOptions","TerserPlugin","ie8","mangle","safari10","parse","ecma","compress","output","parallel","Math","max","cpuCoreCount","minifyCss","minimizerOptions","preset","svgo","full","CssMinimizerPlugin","fastRefresh","regExpToHack","ReactRefreshWebpackPlugin","overlay","sockIntegration","__dirname","extractText","moment","ignore","resourceRegExp","contextRegExp","extractStats","GatsbyWebpackStatsExtractor","eslintGraphqlSchemaReload","GatsbyWebpackEslintGraphqlSchemaReload","virtualModules","GatsbyWebpackVirtualModules","eslint","schema","extensions","VIRTUAL_MODULES_BASE_PATH","eslintConfig","ESLintPlugin","eslintRequired","eslintRequiredConfig"],"sources":["../../src/utils/webpack-utils.ts"],"sourcesContent":["import * as path from \"path\"\nimport { RuleSetRule, WebpackPluginInstance } from \"webpack\"\nimport { GraphQLSchema } from \"graphql\"\nimport { Plugin as PostCSSPlugin } from \"postcss\"\nimport autoprefixer from \"autoprefixer\"\nimport flexbugs from \"postcss-flexbugs-fixes\"\nimport TerserPlugin from \"terser-webpack-plugin\"\nimport type { MinifyOptions as TerserOptions } from \"terser\"\nimport MiniCssExtractPlugin from \"mini-css-extract-plugin\"\nimport CssMinimizerPlugin from \"css-minimizer-webpack-plugin\"\nimport ReactRefreshWebpackPlugin from \"@pmmmwh/react-refresh-webpack-plugin\"\nimport { getBrowsersList } from \"./browserslist\"\nimport ESLintPlugin from \"eslint-webpack-plugin\"\nimport { cpuCoreCount } from \"gatsby-core-utils\"\nimport { GatsbyWebpackStatsExtractor } from \"./gatsby-webpack-stats-extractor\"\nimport { GatsbyWebpackEslintGraphqlSchemaReload } from \"./gatsby-webpack-eslint-graphql-schema-reload-plugin\"\nimport {\n  GatsbyWebpackVirtualModules,\n  VIRTUAL_MODULES_BASE_PATH,\n} from \"./gatsby-webpack-virtual-modules\"\n\nimport { builtinPlugins } from \"./webpack-plugins\"\nimport { IProgram, Stage } from \"../commands/types\"\nimport { eslintConfig, eslintRequiredConfig } from \"./eslint-config\"\nimport { store } from \"../redux\"\nimport type { RuleSetUseItem } from \"webpack\"\n\ntype Loader = string | { loader: string; options?: { [name: string]: any } }\ntype LoaderResolver<T = Record<string, unknown>> = (options?: T) => Loader\n\ntype LoaderOptions = Record<string, any>\ntype RuleFactory<T = Record<string, unknown>> = (\n  options?: T & LoaderOptions\n) => RuleSetRule\n\ntype ContextualRuleFactory<T = Record<string, unknown>> = RuleFactory<T> & {\n  internal?: RuleFactory<T>\n  external?: RuleFactory<T>\n}\n\ntype PluginFactory = (...args: any) => WebpackPluginInstance\n\ntype BuiltinPlugins = typeof builtinPlugins\n\ntype CSSModulesOptions =\n  | boolean\n  | string\n  | {\n      mode?:\n        | \"local\"\n        | \"global\"\n        | \"pure\"\n        | ((resourcePath: string) => \"local\" | \"global\" | \"pure\")\n      auto?: boolean\n      exportGlobals?: boolean\n      localIdentName?: string\n      localIdentContext?: string\n      localIdentHashPrefix?: string\n      namedExport?: boolean\n      exportLocalsConvention?:\n        | \"asIs\"\n        | \"camelCaseOnly\"\n        | \"camelCase\"\n        | \"dashes\"\n        | \"dashesOnly\"\n      exportOnlyLocals?: boolean\n    }\n\ntype MiniCSSExtractLoaderModuleOptions =\n  | undefined\n  | boolean\n  | {\n      namedExport?: boolean\n    }\n/**\n * Utils that produce webpack `loader` objects\n */\ninterface ILoaderUtils {\n  yaml: LoaderResolver\n  style: LoaderResolver\n  css: LoaderResolver<{\n    url?: boolean | ((url: string, resourcePath: string) => boolean)\n    import?:\n      | boolean\n      | ((url: string, media: string, resourcePath: string) => boolean)\n    modules?: CSSModulesOptions\n    sourceMap?: boolean\n    importLoaders?: number\n    esModule?: boolean\n  }>\n  postcss: LoaderResolver<{\n    browsers?: Array<string>\n    overrideBrowserslist?: Array<string>\n    plugins?: Array<PostCSSPlugin> | ((loader: Loader) => Array<PostCSSPlugin>)\n  }>\n\n  file: LoaderResolver\n  url: LoaderResolver\n  js: LoaderResolver\n  json: LoaderResolver\n  null: LoaderResolver\n  raw: LoaderResolver\n  dependencies: LoaderResolver\n\n  miniCssExtract: LoaderResolver\n  imports?: LoaderResolver\n  exports?: LoaderResolver\n}\n\ninterface IModuleThatUseGatsby {\n  name: string\n  path: string\n}\n\ntype CssLoaderModuleOption = boolean | Record<string, any> | string\n\n/**\n * Utils that produce webpack rule objects\n */\ninterface IRuleUtils {\n  /**\n   * Handles JavaScript compilation via babel\n   */\n  js: RuleFactory<{ modulesThatUseGatsby?: Array<IModuleThatUseGatsby> }>\n  dependencies: RuleFactory<{\n    modulesThatUseGatsby?: Array<IModuleThatUseGatsby>\n  }>\n  yaml: RuleFactory\n  fonts: RuleFactory\n  images: RuleFactory\n  miscAssets: RuleFactory\n  media: RuleFactory\n\n  css: ContextualRuleFactory<{\n    browsers?: Array<string>\n    modules?: CssLoaderModuleOption\n  }>\n  cssModules: RuleFactory\n  postcss: ContextualRuleFactory<{ overrideBrowserOptions: Array<string> }>\n\n  eslint: (schema: GraphQLSchema) => RuleSetRule\n  eslintRequired: () => RuleSetRule\n}\n\ntype PluginUtils = BuiltinPlugins & {\n  extractText: PluginFactory\n  uglify: PluginFactory\n  moment: PluginFactory\n  extractStats: PluginFactory\n  minifyJs: PluginFactory\n  minifyCss: PluginFactory\n  fastRefresh: PluginFactory\n  eslintGraphqlSchemaReload: PluginFactory\n  virtualModules: PluginFactory\n  eslint: PluginFactory\n  eslintRequired: PluginFactory\n}\n\n/**\n * webpack atoms namespace\n */\ninterface IWebpackUtils {\n  loaders: ILoaderUtils\n\n  rules: IRuleUtils\n\n  plugins: PluginUtils\n}\n\nconst vendorRegex = /(node_modules|bower_components)/\n\n/**\n * A factory method that produces an atoms namespace\n */\nexport const createWebpackUtils = (\n  stage: Stage,\n  program: IProgram\n): IWebpackUtils => {\n  const assetRelativeRoot = `static/`\n  const supportedBrowsers = getBrowsersList(program.directory)\n\n  const PRODUCTION = !stage.includes(`develop`)\n\n  const isSSR = stage.includes(`html`)\n  const { config } = store.getState()\n\n  const makeExternalOnly =\n    (original: RuleFactory) =>\n    (options = {}): RuleSetRule => {\n      const rule = original(options)\n      rule.include = vendorRegex\n      return rule\n    }\n\n  const makeInternalOnly =\n    (original: RuleFactory) =>\n    (options = {}): RuleSetRule => {\n      const rule = original(options)\n      rule.exclude = vendorRegex\n      return rule\n    }\n\n  const loaders: ILoaderUtils = {\n    json: (options = {}) => {\n      return {\n        options,\n        loader: require.resolve(`json-loader`),\n      }\n    },\n    yaml: (options = {}) => {\n      return {\n        options,\n        loader: require.resolve(`yaml-loader`),\n      }\n    },\n\n    null: (options = {}) => {\n      return {\n        options,\n        loader: require.resolve(`null-loader`),\n      }\n    },\n\n    raw: (options = {}) => {\n      return {\n        options,\n        loader: require.resolve(`raw-loader`),\n      }\n    },\n\n    style: (options = {}) => {\n      return {\n        options,\n        loader: require.resolve(`style-loader`),\n      }\n    },\n\n    // TODO(v5): Re-Apply https://github.com/gatsbyjs/gatsby/pull/33979 with breaking change in inline loader syntax\n    miniCssExtract: (\n      options: {\n        modules?: MiniCSSExtractLoaderModuleOptions\n      } = {}\n    ) => {\n      let moduleOptions: MiniCSSExtractLoaderModuleOptions = undefined\n\n      const { modules, ...restOptions } = options\n\n      if (typeof modules === `boolean` && options.modules) {\n        moduleOptions = {\n          namedExport: true,\n        }\n      } else {\n        moduleOptions = modules\n      }\n\n      return {\n        loader: MiniCssExtractPlugin.loader,\n        options: {\n          modules: moduleOptions,\n          ...restOptions,\n        },\n      }\n    },\n\n    css: (options = {}) => {\n      let modulesOptions: CSSModulesOptions = false\n      if (options.modules) {\n        modulesOptions = {\n          auto: undefined,\n          namedExport: true,\n          localIdentName: `[name]--[local]--[hash:base64:5]`,\n          exportLocalsConvention: `dashesOnly`,\n          exportOnlyLocals: isSSR,\n        }\n\n        if (typeof options.modules === `object`) {\n          modulesOptions = {\n            ...modulesOptions,\n            ...options.modules,\n          }\n        }\n      }\n\n      return {\n        loader: require.resolve(`css-loader`),\n        options: {\n          // Absolute urls (https or //) are not send to this function. Only resolvable paths absolute or relative ones.\n          url: function (url: string): boolean {\n            // When an url starts with /\n            if (url.startsWith(`/`)) {\n              return false\n            }\n\n            return true\n          },\n          sourceMap: !PRODUCTION,\n          modules: modulesOptions,\n        },\n      }\n    },\n\n    postcss: (options = {}) => {\n      const {\n        plugins,\n        overrideBrowserslist = supportedBrowsers,\n        ...postcssOpts\n      } = options\n\n      return {\n        loader: require.resolve(`postcss-loader`),\n        options: {\n          execute: false,\n          sourceMap: !PRODUCTION,\n          // eslint-disable-next-line @typescript-eslint/explicit-function-return-type\n          postcssOptions: (loaderContext: any) => {\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            let postCSSPlugins: Array<PostCSSPlugin> = []\n            if (plugins) {\n              postCSSPlugins =\n                typeof plugins === `function` ? plugins(loaderContext) : plugins\n            }\n\n            const autoprefixerPlugin = autoprefixer({\n              overrideBrowserslist,\n              flexbox: `no-2009`,\n              ...((\n                postCSSPlugins.find(\n                  plugin => plugin.postcssPlugin === `autoprefixer`\n                ) as unknown as autoprefixer.ExportedAPI\n              )?.options ?? {}),\n            })\n\n            postCSSPlugins.unshift(autoprefixerPlugin)\n            postCSSPlugins.unshift(flexbugs)\n\n            return {\n              plugins: postCSSPlugins,\n              ...postcssOpts,\n            }\n          },\n        },\n      }\n    },\n\n    file: (options = {}) => {\n      return {\n        loader: require.resolve(`file-loader`),\n        options: {\n          name: `${assetRelativeRoot}[name]-[hash].[ext]`,\n          ...options,\n        },\n      }\n    },\n\n    url: (options = {}) => {\n      return {\n        loader: require.resolve(`url-loader`),\n        options: {\n          limit: 10000,\n          name: `${assetRelativeRoot}[name]-[hash].[ext]`,\n          fallback: require.resolve(`file-loader`),\n          ...options,\n        },\n      }\n    },\n\n    js: options => {\n      return {\n        options: {\n          stage,\n          reactRuntime: config.jsxRuntime,\n          reactImportSource: config.jsxImportSource,\n          cacheDirectory: path.join(\n            program.directory,\n            `.cache`,\n            `webpack`,\n            `babel`\n          ),\n          ...options,\n          rootDir: program.directory,\n        },\n        loader: require.resolve(`./babel-loader`),\n      }\n    },\n\n    dependencies: options => {\n      return {\n        options: {\n          cacheDirectory: path.join(\n            program.directory,\n            `.cache`,\n            `webpack`,\n            `babel`\n          ),\n          ...options,\n        },\n        loader: require.resolve(`babel-loader`),\n      }\n    },\n  }\n\n  /**\n   * Rules\n   */\n  const rules = {} as IRuleUtils\n\n  /**\n   * JavaScript loader via babel, includes userland code\n   * and packages that depend on `gatsby`\n   */\n  {\n    const js = ({\n      modulesThatUseGatsby = [],\n      ...options\n    }: {\n      modulesThatUseGatsby?: Array<IModuleThatUseGatsby>\n    } = {}): RuleSetRule => {\n      return {\n        test: /\\.(js|mjs|jsx|ts|tsx)$/,\n        include: (modulePath: string): boolean => {\n          // when it's not coming from node_modules we treat it as a source file.\n          if (!vendorRegex.test(modulePath)) {\n            return true\n          }\n\n          // If the module uses Gatsby as a dependency\n          // we want to treat it as src so we can extract queries\n          return modulesThatUseGatsby.some(module =>\n            modulePath.includes(module.path)\n          )\n        },\n        type: `javascript/auto`,\n        use: ({ resourceQuery, issuer }): Array<RuleSetUseItem> => [\n          // If a JS import comes from async-requires, assume it is for a page component.\n          // Using `issuer` allows us to avoid mutating async-requires for this case.\n          //\n          // If other imports are added to async-requires in the future, another option is to\n          // append a query param to page components in the store and check against `resourceQuery` here.\n          //\n          // This would require we adjust `doesModuleMatchResourcePath` in `static-query-mapper`\n          // to check against the module's `resourceResolveData.path` instead of resource to avoid\n          // mismatches because of the added query param. Other adjustments may also be needed.\n          loaders.js({\n            ...options,\n            configFile: true,\n            compact: PRODUCTION,\n            isPageTemplate: /async-requires/.test(issuer),\n            resourceQuery,\n          }),\n        ],\n      }\n    }\n    rules.js = js\n  }\n\n  /**\n   * Node_modules JavaScript loader via babel\n   * Excludes core-js & babel-runtime to speedup babel transpilation\n   * Excludes modules that use Gatsby since the `rules.js` already transpiles those\n   */\n  {\n    const dependencies = ({\n      modulesThatUseGatsby = [],\n    }: {\n      modulesThatUseGatsby?: Array<IModuleThatUseGatsby>\n    } = {}): RuleSetRule => {\n      const jsOptions = {\n        babelrc: false,\n        configFile: false,\n        compact: false,\n        presets: [\n          [\n            require.resolve(`babel-preset-gatsby/dependencies`),\n            {\n              stage,\n            },\n          ],\n        ],\n        // If an error happens in a package, it's possible to be\n        // because it was compiled. Thus, we don't want the browser\n        // debugger to show the original code. Instead, the code\n        // being evaluated would be much more helpful.\n        sourceMaps: false,\n\n        cacheIdentifier: JSON.stringify({\n          browsersList: supportedBrowsers,\n          gatsbyPreset: require(`babel-preset-gatsby/package.json`).version,\n        }),\n      }\n\n      // TODO REMOVE IN V3\n      // a list of vendors we know we shouldn't polyfill (we should have set core-js to entry but we didn't so we have to do this)\n      const VENDORS_TO_NOT_POLYFILL = [\n        `@babel[\\\\\\\\/]runtime`,\n        `@mikaelkristiansson[\\\\\\\\/]domready`,\n        `@reach[\\\\\\\\/]router`,\n        `babel-preset-gatsby`,\n        `core-js`,\n        `dom-helpers`,\n        `gatsby-legacy-polyfills`,\n        `gatsby-link`,\n        `gatsby-script`,\n        `gatsby-react-router-scroll`,\n        `invariant`,\n        `lodash`,\n        `mitt`,\n        `prop-types`,\n        `react-dom`,\n        `react`,\n        `regenerator-runtime`,\n        `scheduler`,\n        `scroll-behavior`,\n        `shallow-compare`,\n        `warning`,\n        `webpack`,\n      ]\n      const doNotPolyfillRegex = new RegExp(\n        `[\\\\\\\\/]node_modules[\\\\\\\\/](${VENDORS_TO_NOT_POLYFILL.join(\n          `|`\n        )})[\\\\\\\\/]`\n      )\n\n      return {\n        test: /\\.(js|mjs)$/,\n        exclude: (modulePath: string): boolean => {\n          // If dep is user land code, exclude\n          if (!vendorRegex.test(modulePath)) {\n            return true\n          }\n\n          // If dep uses Gatsby, exclude\n          if (\n            modulesThatUseGatsby.some(module =>\n              modulePath.includes(module.path)\n            )\n          ) {\n            return true\n          }\n\n          return doNotPolyfillRegex.test(modulePath)\n        },\n        type: `javascript/auto`,\n        use: [loaders.dependencies(jsOptions)],\n      }\n    }\n    rules.dependencies = dependencies\n  }\n\n  rules.yaml = (): RuleSetRule => {\n    return {\n      test: /\\.ya?ml$/,\n      type: `json`,\n      use: [loaders.yaml()],\n    }\n  }\n\n  /**\n   * Font loader\n   */\n  rules.fonts = (): RuleSetRule => {\n    return {\n      use: [loaders.url()],\n      test: /\\.(eot|otf|ttf|woff(2)?)(\\?.*)?$/,\n    }\n  }\n\n  /**\n   * Loads image assets, inlines images via a data URI if they are below\n   * the size threshold\n   */\n  rules.images = (): RuleSetRule => {\n    return {\n      use: [loaders.url()],\n      test: /\\.(ico|svg|jpg|jpeg|png|gif|webp|avif)(\\?.*)?$/,\n    }\n  }\n\n  /**\n   * Loads audio and video and inlines them via a data URI if they are below\n   * the size threshold\n   */\n  rules.media = (): RuleSetRule => {\n    return {\n      use: [loaders.url()],\n      test: /\\.(mp4|webm|ogv|wav|mp3|m4a|aac|oga|flac)$/,\n    }\n  }\n\n  /**\n   * Loads assets without inlining\n   */\n  rules.miscAssets = (): RuleSetRule => {\n    return {\n      use: [loaders.file()],\n      test: /\\.pdf$/,\n    }\n  }\n\n  /**\n   * CSS style loader.\n   */\n  {\n    const css: IRuleUtils[\"css\"] = (options = {}): RuleSetRule => {\n      const { browsers, ...restOptions } = options\n      const use = [\n        !isSSR && loaders.miniCssExtract(restOptions),\n        loaders.css({ ...restOptions, importLoaders: 1 }),\n        loaders.postcss({ browsers }),\n      ].filter(Boolean) as RuleSetRule[\"use\"]\n\n      return {\n        use,\n        test: /\\.css$/,\n      }\n    }\n\n    /**\n     * CSS style loader, _excludes_ node_modules.\n     */\n    css.internal = makeInternalOnly(css)\n    css.external = makeExternalOnly(css)\n\n    const cssModules: IRuleUtils[\"cssModules\"] = (options): RuleSetRule => {\n      const rule = css({ ...options, modules: true })\n      delete rule.exclude\n      rule.test = /\\.module\\.css$/\n      return rule\n    }\n\n    rules.css = css\n    rules.cssModules = cssModules\n  }\n\n  /**\n   * PostCSS loader.\n   */\n  {\n    const postcss: ContextualRuleFactory = (options): RuleSetRule => {\n      return {\n        test: /\\.css$/,\n        use: [loaders.css({ importLoaders: 1 }), loaders.postcss(options)],\n      }\n    }\n\n    /**\n     * PostCSS loader, _excludes_ node_modules.\n     */\n    postcss.internal = makeInternalOnly(postcss)\n    postcss.external = makeExternalOnly(postcss)\n    rules.postcss = postcss\n  }\n  /**\n   * cast rules to IRuleUtils\n   */\n  /**\n   * Plugins\n   */\n  const plugins = { ...builtinPlugins } as PluginUtils\n\n  plugins.minifyJs = ({\n    terserOptions,\n    ...options\n  }: {\n    terserOptions?: TerserOptions\n  } = {}): WebpackPluginInstance =>\n    new TerserPlugin({\n      exclude: /\\.min\\.js/,\n      terserOptions: {\n        ie8: false,\n        mangle: {\n          safari10: true,\n        },\n        parse: {\n          ecma: 5,\n        },\n        compress: {\n          ecma: 5,\n        },\n        output: {\n          ecma: 5,\n        },\n        ...terserOptions,\n      },\n      parallel: Math.max(1, cpuCoreCount() - 1),\n      ...options,\n    })\n\n  plugins.minifyCss = (\n    options = {\n      minimizerOptions: {\n        preset: [\n          `default`,\n          {\n            svgo: {\n              full: true,\n              plugins: [\n                // potentially destructive plugins removed - see https://github.com/gatsbyjs/gatsby/issues/15629\n                // use correct config format and remove plugins requiring specific params - see https://github.com/gatsbyjs/gatsby/issues/31619\n                // List of default plugins and their defaults: https://github.com/svg/svgo#built-in-plugins\n                // Last update 2021-08-17\n                `cleanupAttrs`,\n                `cleanupEnableBackground`,\n                `cleanupIDs`,\n                `cleanupListOfValues`, // Default: disabled\n                `cleanupNumericValues`,\n                `collapseGroups`,\n                `convertColors`,\n                `convertPathData`,\n                `convertStyleToAttrs`, // Default: disabled\n                `convertTransform`,\n                `inlineStyles`,\n                `mergePaths`,\n                `minifyStyles`,\n                `moveElemsAttrsToGroup`,\n                `moveGroupAttrsToElems`,\n                `prefixIds`, // Default: disabled\n                `removeComments`,\n                `removeDesc`,\n                `removeDoctype`,\n                `removeEditorsNSData`,\n                `removeEmptyAttrs`,\n                `removeEmptyContainers`,\n                `removeEmptyText`,\n                `removeHiddenElems`,\n                `removeMetadata`,\n                `removeNonInheritableGroupAttrs`,\n                `removeRasterImages`, // Default: disabled\n                `removeScriptElement`, // Default: disabled\n                `removeStyleElement`, // Default: disabled\n                `removeTitle`,\n                `removeUnknownsAndDefaults`,\n                `removeUnusedNS`,\n                `removeUselessDefs`,\n                `removeUselessStrokeAndFill`,\n                `removeXMLProcInst`,\n                `reusePaths`, // Default: disabled\n                `sortAttrs`, // Default: disabled\n              ],\n            },\n          },\n        ],\n      },\n    }\n  ): CssMinimizerPlugin =>\n    new CssMinimizerPlugin({\n      parallel: Math.max(1, cpuCoreCount() - 1),\n      ...options,\n    })\n\n  plugins.fastRefresh = ({ modulesThatUseGatsby }): WebpackPluginInstance => {\n    const regExpToHack = /node_modules/\n    regExpToHack.test = (modulePath: string): boolean => {\n      // when it's not coming from node_modules we treat it as a source file.\n      if (!vendorRegex.test(modulePath)) {\n        return false\n      }\n\n      // If the module uses Gatsby as a dependency\n      // we want to treat it as src because of shadowing\n      return !modulesThatUseGatsby.some(module =>\n        modulePath.includes(module.path)\n      )\n    }\n\n    return new ReactRefreshWebpackPlugin({\n      overlay: {\n        sockIntegration: `whm`,\n        module: path.join(__dirname, `fast-refresh-module`),\n      },\n      // this is a bit hacky - exclude expect string or regexp or array of those\n      // so this is tricking ReactRefreshWebpackPlugin with providing regexp with\n      // overwritten .test method\n      exclude: regExpToHack,\n    })\n  }\n\n  plugins.extractText = (options: any): WebpackPluginInstance =>\n    new MiniCssExtractPlugin({\n      ...options,\n    })\n\n  plugins.moment = (): WebpackPluginInstance =>\n    plugins.ignore({ resourceRegExp: /^\\.\\/locale$/, contextRegExp: /moment$/ })\n\n  plugins.extractStats = (): GatsbyWebpackStatsExtractor =>\n    new GatsbyWebpackStatsExtractor()\n\n  plugins.eslintGraphqlSchemaReload =\n    (): GatsbyWebpackEslintGraphqlSchemaReload =>\n      new GatsbyWebpackEslintGraphqlSchemaReload()\n\n  plugins.virtualModules = (): GatsbyWebpackVirtualModules =>\n    new GatsbyWebpackVirtualModules()\n\n  plugins.eslint = (schema: GraphQLSchema): WebpackPluginInstance => {\n    const options = {\n      extensions: [`js`, `jsx`],\n      exclude: [\n        `/node_modules/`,\n        `/bower_components/`,\n        VIRTUAL_MODULES_BASE_PATH,\n      ],\n      ...eslintConfig(schema, config.jsxRuntime === `automatic`),\n    }\n    // @ts-ignore\n    return new ESLintPlugin(options)\n  }\n\n  plugins.eslintRequired = (): WebpackPluginInstance => {\n    const options = {\n      extensions: [`js`, `jsx`],\n      exclude: [\n        `/node_modules/`,\n        `/bower_components/`,\n        VIRTUAL_MODULES_BASE_PATH,\n      ],\n      ...eslintRequiredConfig,\n    }\n    // @ts-ignore\n    return new ESLintPlugin(options)\n  }\n\n  return {\n    loaders,\n    rules,\n    plugins,\n  }\n}\n"],"mappings":";;;;;;;AAAA;;AAIA;;AACA;;AACA;;AAEA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AAKA;;AAEA;;AACA;;;;;;AAiJA,MAAMA,WAAW,GAAG,iCAApB;AAEA;AACA;AACA;;AACO,MAAMC,kBAAkB,GAAG,CAChCC,KADgC,EAEhCC,OAFgC,KAGd;EAClB,MAAMC,iBAAiB,GAAI,SAA3B;EACA,MAAMC,iBAAiB,GAAG,IAAAC,6BAAA,EAAgBH,OAAO,CAACI,SAAxB,CAA1B;EAEA,MAAMC,UAAU,GAAG,CAACN,KAAK,CAACO,QAAN,CAAgB,SAAhB,CAApB;EAEA,MAAMC,KAAK,GAAGR,KAAK,CAACO,QAAN,CAAgB,MAAhB,CAAd;;EACA,MAAM;IAAEE;EAAF,IAAaC,YAAA,CAAMC,QAAN,EAAnB;;EAEA,MAAMC,gBAAgB,GACnBC,QAAD,IACA,CAACC,OAAO,GAAG,EAAX,KAA+B;IAC7B,MAAMC,IAAI,GAAGF,QAAQ,CAACC,OAAD,CAArB;IACAC,IAAI,CAACC,OAAL,GAAelB,WAAf;IACA,OAAOiB,IAAP;EACD,CANH;;EAQA,MAAME,gBAAgB,GACnBJ,QAAD,IACA,CAACC,OAAO,GAAG,EAAX,KAA+B;IAC7B,MAAMC,IAAI,GAAGF,QAAQ,CAACC,OAAD,CAArB;IACAC,IAAI,CAACG,OAAL,GAAepB,WAAf;IACA,OAAOiB,IAAP;EACD,CANH;;EAQA,MAAMI,OAAqB,GAAG;IAC5BC,IAAI,EAAE,CAACN,OAAO,GAAG,EAAX,KAAkB;MACtB,OAAO;QACLA,OADK;QAELO,MAAM,EAAEC,OAAO,CAACC,OAAR,CAAiB,aAAjB;MAFH,CAAP;IAID,CAN2B;IAO5BC,IAAI,EAAE,CAACV,OAAO,GAAG,EAAX,KAAkB;MACtB,OAAO;QACLA,OADK;QAELO,MAAM,EAAEC,OAAO,CAACC,OAAR,CAAiB,aAAjB;MAFH,CAAP;IAID,CAZ2B;IAc5BE,IAAI,EAAE,CAACX,OAAO,GAAG,EAAX,KAAkB;MACtB,OAAO;QACLA,OADK;QAELO,MAAM,EAAEC,OAAO,CAACC,OAAR,CAAiB,aAAjB;MAFH,CAAP;IAID,CAnB2B;IAqB5BG,GAAG,EAAE,CAACZ,OAAO,GAAG,EAAX,KAAkB;MACrB,OAAO;QACLA,OADK;QAELO,MAAM,EAAEC,OAAO,CAACC,OAAR,CAAiB,YAAjB;MAFH,CAAP;IAID,CA1B2B;IA4B5BI,KAAK,EAAE,CAACb,OAAO,GAAG,EAAX,KAAkB;MACvB,OAAO;QACLA,OADK;QAELO,MAAM,EAAEC,OAAO,CAACC,OAAR,CAAiB,cAAjB;MAFH,CAAP;IAID,CAjC2B;IAmC5B;IACAK,cAAc,EAAE,CACdd,OAEC,GAAG,EAHU,KAIX;MACH,IAAIe,aAAgD,GAAGC,SAAvD;MAEA,MAAM;QAAEC,OAAF;QAAW,GAAGC;MAAd,IAA8BlB,OAApC;;MAEA,IAAI,OAAOiB,OAAP,KAAoB,SAApB,IAAgCjB,OAAO,CAACiB,OAA5C,EAAqD;QACnDF,aAAa,GAAG;UACdI,WAAW,EAAE;QADC,CAAhB;MAGD,CAJD,MAIO;QACLJ,aAAa,GAAGE,OAAhB;MACD;;MAED,OAAO;QACLV,MAAM,EAAEa,6BAAA,CAAqBb,MADxB;QAELP,OAAO,EAAE;UACPiB,OAAO,EAAEF,aADF;UAEP,GAAGG;QAFI;MAFJ,CAAP;IAOD,CA5D2B;IA8D5BG,GAAG,EAAE,CAACrB,OAAO,GAAG,EAAX,KAAkB;MACrB,IAAIsB,cAAiC,GAAG,KAAxC;;MACA,IAAItB,OAAO,CAACiB,OAAZ,EAAqB;QACnBK,cAAc,GAAG;UACfC,IAAI,EAAEP,SADS;UAEfG,WAAW,EAAE,IAFE;UAGfK,cAAc,EAAG,kCAHF;UAIfC,sBAAsB,EAAG,YAJV;UAKfC,gBAAgB,EAAEhC;QALH,CAAjB;;QAQA,IAAI,OAAOM,OAAO,CAACiB,OAAf,KAA4B,QAAhC,EAAyC;UACvCK,cAAc,GAAG,EACf,GAAGA,cADY;YAEf,GAAGtB,OAAO,CAACiB;UAFI,CAAjB;QAID;MACF;;MAED,OAAO;QACLV,MAAM,EAAEC,OAAO,CAACC,OAAR,CAAiB,YAAjB,CADH;QAELT,OAAO,EAAE;UACP;UACA2B,GAAG,EAAE,UAAUA,GAAV,EAAgC;YACnC;YACA,IAAIA,GAAG,CAACC,UAAJ,CAAgB,GAAhB,CAAJ,EAAyB;cACvB,OAAO,KAAP;YACD;;YAED,OAAO,IAAP;UACD,CATM;UAUPC,SAAS,EAAE,CAACrC,UAVL;UAWPyB,OAAO,EAAEK;QAXF;MAFJ,CAAP;IAgBD,CAjG2B;IAmG5BQ,OAAO,EAAE,CAAC9B,OAAO,GAAG,EAAX,KAAkB;MACzB,MAAM;QACJ+B,OADI;QAEJC,oBAAoB,GAAG3C,iBAFnB;QAGJ,GAAG4C;MAHC,IAIFjC,OAJJ;MAMA,OAAO;QACLO,MAAM,EAAEC,OAAO,CAACC,OAAR,CAAiB,gBAAjB,CADH;QAELT,OAAO,EAAE;UACPkC,OAAO,EAAE,KADF;UAEPL,SAAS,EAAE,CAACrC,UAFL;UAGP;UACA2C,cAAc,EAAGC,aAAD,IAAwB;YAAA;;YACtC;YACA,IAAIC,cAAoC,GAAG,EAA3C;;YACA,IAAIN,OAAJ,EAAa;cACXM,cAAc,GACZ,OAAON,OAAP,KAAoB,UAApB,GAAgCA,OAAO,CAACK,aAAD,CAAvC,GAAyDL,OAD3D;YAED;;YAED,MAAMO,kBAAkB,GAAG,IAAAC,qBAAA,EAAa;cACtCP,oBADsC;cAEtCQ,OAAO,EAAG,SAF4B;cAGtC,wCACEH,cAAc,CAACI,IAAf,CACEC,MAAM,IAAIA,MAAM,CAACC,aAAP,KAA0B,cADtC,CADF,yDAAI,qBAID3C,OAJH,+CAIc,EAJd;YAHsC,CAAb,CAA3B;YAUAqC,cAAc,CAACO,OAAf,CAAuBN,kBAAvB;YACAD,cAAc,CAACO,OAAf,CAAuBC,6BAAvB;YAEA,OAAO;cACLd,OAAO,EAAEM,cADJ;cAEL,GAAGJ;YAFE,CAAP;UAID;QA7BM;MAFJ,CAAP;IAkCD,CA5I2B;IA8I5Ba,IAAI,EAAE,CAAC9C,OAAO,GAAG,EAAX,KAAkB;MACtB,OAAO;QACLO,MAAM,EAAEC,OAAO,CAACC,OAAR,CAAiB,aAAjB,CADH;QAELT,OAAO,EAAE;UACP+C,IAAI,EAAG,GAAE3D,iBAAkB,qBADpB;UAEP,GAAGY;QAFI;MAFJ,CAAP;IAOD,CAtJ2B;IAwJ5B2B,GAAG,EAAE,CAAC3B,OAAO,GAAG,EAAX,KAAkB;MACrB,OAAO;QACLO,MAAM,EAAEC,OAAO,CAACC,OAAR,CAAiB,YAAjB,CADH;QAELT,OAAO,EAAE;UACPgD,KAAK,EAAE,KADA;UAEPD,IAAI,EAAG,GAAE3D,iBAAkB,qBAFpB;UAGP6D,QAAQ,EAAEzC,OAAO,CAACC,OAAR,CAAiB,aAAjB,CAHH;UAIP,GAAGT;QAJI;MAFJ,CAAP;IASD,CAlK2B;IAoK5BkD,EAAE,EAAElD,OAAO,IAAI;MACb,OAAO;QACLA,OAAO,EAAE;UACPd,KADO;UAEPiE,YAAY,EAAExD,MAAM,CAACyD,UAFd;UAGPC,iBAAiB,EAAE1D,MAAM,CAAC2D,eAHnB;UAIPC,cAAc,EAAEC,IAAI,CAACC,IAAL,CACdtE,OAAO,CAACI,SADM,EAEb,QAFa,EAGb,SAHa,EAIb,OAJa,CAJT;UAUP,GAAGS,OAVI;UAWP0D,OAAO,EAAEvE,OAAO,CAACI;QAXV,CADJ;QAcLgB,MAAM,EAAEC,OAAO,CAACC,OAAR,CAAiB,gBAAjB;MAdH,CAAP;IAgBD,CArL2B;IAuL5BkD,YAAY,EAAE3D,OAAO,IAAI;MACvB,OAAO;QACLA,OAAO,EAAE;UACPuD,cAAc,EAAEC,IAAI,CAACC,IAAL,CACdtE,OAAO,CAACI,SADM,EAEb,QAFa,EAGb,SAHa,EAIb,OAJa,CADT;UAOP,GAAGS;QAPI,CADJ;QAULO,MAAM,EAAEC,OAAO,CAACC,OAAR,CAAiB,cAAjB;MAVH,CAAP;IAYD;EApM2B,CAA9B;EAuMA;AACF;AACA;;EACE,MAAMmD,KAAK,GAAG,EAAd;EAEA;AACF;AACA;AACA;;EACE;IACE,MAAMV,EAAE,GAAG,CAAC;MACVW,oBAAoB,GAAG,EADb;MAEV,GAAG7D;IAFO,IAKR,EALO,KAKa;MACtB,OAAO;QACL8D,IAAI,EAAE,wBADD;QAEL5D,OAAO,EAAG6D,UAAD,IAAiC;UACxC;UACA,IAAI,CAAC/E,WAAW,CAAC8E,IAAZ,CAAiBC,UAAjB,CAAL,EAAmC;YACjC,OAAO,IAAP;UACD,CAJuC,CAMxC;UACA;;;UACA,OAAOF,oBAAoB,CAACG,IAArB,CAA0BC,MAAM,IACrCF,UAAU,CAACtE,QAAX,CAAoBwE,MAAM,CAACT,IAA3B,CADK,CAAP;QAGD,CAbI;QAcLU,IAAI,EAAG,iBAdF;QAeLC,GAAG,EAAE,CAAC;UAAEC,aAAF;UAAiBC;QAAjB,CAAD,KAAsD,CACzD;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACAhE,OAAO,CAAC6C,EAAR,CAAW,EACT,GAAGlD,OADM;UAETsE,UAAU,EAAE,IAFH;UAGTC,OAAO,EAAE/E,UAHA;UAITgF,cAAc,EAAE,iBAAiBV,IAAjB,CAAsBO,MAAtB,CAJP;UAKTD;QALS,CAAX,CAVyD;MAftD,CAAP;IAkCD,CAxCD;;IAyCAR,KAAK,CAACV,EAAN,GAAWA,EAAX;EACD;EAED;AACF;AACA;AACA;AACA;;EACE;IACE,MAAMS,YAAY,GAAG,CAAC;MACpBE,oBAAoB,GAAG;IADH,IAIlB,EAJiB,KAIG;MACtB,MAAMY,SAAS,GAAG;QAChBC,OAAO,EAAE,KADO;QAEhBJ,UAAU,EAAE,KAFI;QAGhBC,OAAO,EAAE,KAHO;QAIhBI,OAAO,EAAE,CACP,CACEnE,OAAO,CAACC,OAAR,CAAiB,kCAAjB,CADF,EAEE;UACEvB;QADF,CAFF,CADO,CAJO;QAYhB;QACA;QACA;QACA;QACA0F,UAAU,EAAE,KAhBI;QAkBhBC,eAAe,EAAEC,IAAI,CAACC,SAAL,CAAe;UAC9BC,YAAY,EAAE3F,iBADgB;UAE9B4F,YAAY,EAAEzE,OAAO,CAAE,kCAAF,CAAP,CAA4C0E;QAF5B,CAAf;MAlBD,CAAlB,CADsB,CAyBtB;MACA;;MACA,MAAMC,uBAAuB,GAAG,CAC7B,sBAD6B,EAE7B,oCAF6B,EAG7B,qBAH6B,EAI7B,qBAJ6B,EAK7B,SAL6B,EAM7B,aAN6B,EAO7B,yBAP6B,EAQ7B,aAR6B,EAS7B,eAT6B,EAU7B,4BAV6B,EAW7B,WAX6B,EAY7B,QAZ6B,EAa7B,MAb6B,EAc7B,YAd6B,EAe7B,WAf6B,EAgB7B,OAhB6B,EAiB7B,qBAjB6B,EAkB7B,WAlB6B,EAmB7B,iBAnB6B,EAoB7B,iBApB6B,EAqB7B,SArB6B,EAsB7B,SAtB6B,CAAhC;MAwBA,MAAMC,kBAAkB,GAAG,IAAIC,MAAJ,CACxB,8BAA6BF,uBAAuB,CAAC1B,IAAxB,CAC3B,GAD2B,CAE5B,UAHuB,CAA3B;MAMA,OAAO;QACLK,IAAI,EAAE,aADD;QAEL1D,OAAO,EAAG2D,UAAD,IAAiC;UACxC;UACA,IAAI,CAAC/E,WAAW,CAAC8E,IAAZ,CAAiBC,UAAjB,CAAL,EAAmC;YACjC,OAAO,IAAP;UACD,CAJuC,CAMxC;;;UACA,IACEF,oBAAoB,CAACG,IAArB,CAA0BC,MAAM,IAC9BF,UAAU,CAACtE,QAAX,CAAoBwE,MAAM,CAACT,IAA3B,CADF,CADF,EAIE;YACA,OAAO,IAAP;UACD;;UAED,OAAO4B,kBAAkB,CAACtB,IAAnB,CAAwBC,UAAxB,CAAP;QACD,CAlBI;QAmBLG,IAAI,EAAG,iBAnBF;QAoBLC,GAAG,EAAE,CAAC9D,OAAO,CAACsD,YAAR,CAAqBc,SAArB,CAAD;MApBA,CAAP;IAsBD,CAnFD;;IAoFAb,KAAK,CAACD,YAAN,GAAqBA,YAArB;EACD;;EAEDC,KAAK,CAAClD,IAAN,GAAa,MAAmB;IAC9B,OAAO;MACLoD,IAAI,EAAE,UADD;MAELI,IAAI,EAAG,MAFF;MAGLC,GAAG,EAAE,CAAC9D,OAAO,CAACK,IAAR,EAAD;IAHA,CAAP;EAKD,CAND;EAQA;AACF;AACA;;;EACEkD,KAAK,CAAC0B,KAAN,GAAc,MAAmB;IAC/B,OAAO;MACLnB,GAAG,EAAE,CAAC9D,OAAO,CAACsB,GAAR,EAAD,CADA;MAELmC,IAAI,EAAE;IAFD,CAAP;EAID,CALD;EAOA;AACF;AACA;AACA;;;EACEF,KAAK,CAAC2B,MAAN,GAAe,MAAmB;IAChC,OAAO;MACLpB,GAAG,EAAE,CAAC9D,OAAO,CAACsB,GAAR,EAAD,CADA;MAELmC,IAAI,EAAE;IAFD,CAAP;EAID,CALD;EAOA;AACF;AACA;AACA;;;EACEF,KAAK,CAAC4B,KAAN,GAAc,MAAmB;IAC/B,OAAO;MACLrB,GAAG,EAAE,CAAC9D,OAAO,CAACsB,GAAR,EAAD,CADA;MAELmC,IAAI,EAAE;IAFD,CAAP;EAID,CALD;EAOA;AACF;AACA;;;EACEF,KAAK,CAAC6B,UAAN,GAAmB,MAAmB;IACpC,OAAO;MACLtB,GAAG,EAAE,CAAC9D,OAAO,CAACyC,IAAR,EAAD,CADA;MAELgB,IAAI,EAAE;IAFD,CAAP;EAID,CALD;EAOA;AACF;AACA;;;EACE;IACE,MAAMzC,GAAsB,GAAG,CAACrB,OAAO,GAAG,EAAX,KAA+B;MAC5D,MAAM;QAAE0F,QAAF;QAAY,GAAGxE;MAAf,IAA+BlB,OAArC;MACA,MAAMmE,GAAG,GAAG,CACV,CAACzE,KAAD,IAAUW,OAAO,CAACS,cAAR,CAAuBI,WAAvB,CADA,EAEVb,OAAO,CAACgB,GAAR,CAAY,EAAE,GAAGH,WAAL;QAAkByE,aAAa,EAAE;MAAjC,CAAZ,CAFU,EAGVtF,OAAO,CAACyB,OAAR,CAAgB;QAAE4D;MAAF,CAAhB,CAHU,EAIVE,MAJU,CAIHC,OAJG,CAAZ;MAMA,OAAO;QACL1B,GADK;QAELL,IAAI,EAAE;MAFD,CAAP;IAID,CAZD;IAcA;AACJ;AACA;;;IACIzC,GAAG,CAACyE,QAAJ,GAAe3F,gBAAgB,CAACkB,GAAD,CAA/B;IACAA,GAAG,CAAC0E,QAAJ,GAAejG,gBAAgB,CAACuB,GAAD,CAA/B;;IAEA,MAAM2E,UAAoC,GAAIhG,OAAD,IAA0B;MACrE,MAAMC,IAAI,GAAGoB,GAAG,CAAC,EAAE,GAAGrB,OAAL;QAAciB,OAAO,EAAE;MAAvB,CAAD,CAAhB;MACA,OAAOhB,IAAI,CAACG,OAAZ;MACAH,IAAI,CAAC6D,IAAL,GAAY,gBAAZ;MACA,OAAO7D,IAAP;IACD,CALD;;IAOA2D,KAAK,CAACvC,GAAN,GAAYA,GAAZ;IACAuC,KAAK,CAACoC,UAAN,GAAmBA,UAAnB;EACD;EAED;AACF;AACA;;EACE;IACE,MAAMlE,OAA8B,GAAI9B,OAAD,IAA0B;MAC/D,OAAO;QACL8D,IAAI,EAAE,QADD;QAELK,GAAG,EAAE,CAAC9D,OAAO,CAACgB,GAAR,CAAY;UAAEsE,aAAa,EAAE;QAAjB,CAAZ,CAAD,EAAoCtF,OAAO,CAACyB,OAAR,CAAgB9B,OAAhB,CAApC;MAFA,CAAP;IAID,CALD;IAOA;AACJ;AACA;;;IACI8B,OAAO,CAACgE,QAAR,GAAmB3F,gBAAgB,CAAC2B,OAAD,CAAnC;IACAA,OAAO,CAACiE,QAAR,GAAmBjG,gBAAgB,CAACgC,OAAD,CAAnC;IACA8B,KAAK,CAAC9B,OAAN,GAAgBA,OAAhB;EACD;EACD;AACF;AACA;;EACE;AACF;AACA;;EACE,MAAMC,OAAO,GAAG,EAAE,GAAGkE;EAAL,CAAhB;;EAEAlE,OAAO,CAACmE,QAAR,GAAmB,CAAC;IAClBC,aADkB;IAElB,GAAGnG;EAFe,IAKhB,EALe,KAMjB,IAAIoG,4BAAJ,CAAiB;IACfhG,OAAO,EAAE,WADM;IAEf+F,aAAa,EAAE;MACbE,GAAG,EAAE,KADQ;MAEbC,MAAM,EAAE;QACNC,QAAQ,EAAE;MADJ,CAFK;MAKbC,KAAK,EAAE;QACLC,IAAI,EAAE;MADD,CALM;MAQbC,QAAQ,EAAE;QACRD,IAAI,EAAE;MADE,CARG;MAWbE,MAAM,EAAE;QACNF,IAAI,EAAE;MADA,CAXK;MAcb,GAAGN;IAdU,CAFA;IAkBfS,QAAQ,EAAEC,IAAI,CAACC,GAAL,CAAS,CAAT,EAAY,IAAAC,6BAAA,MAAiB,CAA7B,CAlBK;IAmBf,GAAG/G;EAnBY,CAAjB,CANF;;EA4BA+B,OAAO,CAACiF,SAAR,GAAoB,CAClBhH,OAAO,GAAG;IACRiH,gBAAgB,EAAE;MAChBC,MAAM,EAAE,CACL,SADK,EAEN;QACEC,IAAI,EAAE;UACJC,IAAI,EAAE,IADF;UAEJrF,OAAO,EAAE,CACP;UACA;UACA;UACA;UACC,cALM,EAMN,yBANM,EAON,YAPM,EAQN,qBARM,EAQgB;UACtB,sBATM,EAUN,gBAVM,EAWN,eAXM,EAYN,iBAZM,EAaN,qBAbM,EAagB;UACtB,kBAdM,EAeN,cAfM,EAgBN,YAhBM,EAiBN,cAjBM,EAkBN,uBAlBM,EAmBN,uBAnBM,EAoBN,WApBM,EAoBM;UACZ,gBArBM,EAsBN,YAtBM,EAuBN,eAvBM,EAwBN,qBAxBM,EAyBN,kBAzBM,EA0BN,uBA1BM,EA2BN,iBA3BM,EA4BN,mBA5BM,EA6BN,gBA7BM,EA8BN,gCA9BM,EA+BN,oBA/BM,EA+Be;UACrB,qBAhCM,EAgCgB;UACtB,oBAjCM,EAiCe;UACrB,aAlCM,EAmCN,2BAnCM,EAoCN,gBApCM,EAqCN,mBArCM,EAsCN,4BAtCM,EAuCN,mBAvCM,EAwCN,YAxCM,EAwCO;UACb,WAzCM,CAyCM;UAzCN;QAFL;MADR,CAFM;IADQ;EADV,CADQ,KAyDlB,IAAIsF,kCAAJ,CAAuB;IACrBT,QAAQ,EAAEC,IAAI,CAACC,GAAL,CAAS,CAAT,EAAY,IAAAC,6BAAA,MAAiB,CAA7B,CADW;IAErB,GAAG/G;EAFkB,CAAvB,CAzDF;;EA8DA+B,OAAO,CAACuF,WAAR,GAAsB,CAAC;IAAEzD;EAAF,CAAD,KAAqD;IACzE,MAAM0D,YAAY,GAAG,cAArB;;IACAA,YAAY,CAACzD,IAAb,GAAqBC,UAAD,IAAiC;MACnD;MACA,IAAI,CAAC/E,WAAW,CAAC8E,IAAZ,CAAiBC,UAAjB,CAAL,EAAmC;QACjC,OAAO,KAAP;MACD,CAJkD,CAMnD;MACA;;;MACA,OAAO,CAACF,oBAAoB,CAACG,IAArB,CAA0BC,MAAM,IACtCF,UAAU,CAACtE,QAAX,CAAoBwE,MAAM,CAACT,IAA3B,CADM,CAAR;IAGD,CAXD;;IAaA,OAAO,IAAIgE,kCAAJ,CAA8B;MACnCC,OAAO,EAAE;QACPC,eAAe,EAAG,KADX;QAEPzD,MAAM,EAAET,IAAI,CAACC,IAAL,CAAUkE,SAAV,EAAsB,qBAAtB;MAFD,CAD0B;MAKnC;MACA;MACA;MACAvH,OAAO,EAAEmH;IAR0B,CAA9B,CAAP;EAUD,CAzBD;;EA2BAxF,OAAO,CAAC6F,WAAR,GAAuB5H,OAAD,IACpB,IAAIoB,6BAAJ,CAAyB,EACvB,GAAGpB;EADoB,CAAzB,CADF;;EAKA+B,OAAO,CAAC8F,MAAR,GAAiB,MACf9F,OAAO,CAAC+F,MAAR,CAAe;IAAEC,cAAc,EAAE,cAAlB;IAAkCC,aAAa,EAAE;EAAjD,CAAf,CADF;;EAGAjG,OAAO,CAACkG,YAAR,GAAuB,MACrB,IAAIC,wDAAJ,EADF;;EAGAnG,OAAO,CAACoG,yBAAR,GACE,MACE,IAAIC,oFAAJ,EAFJ;;EAIArG,OAAO,CAACsG,cAAR,GAAyB,MACvB,IAAIC,wDAAJ,EADF;;EAGAvG,OAAO,CAACwG,MAAR,GAAkBC,MAAD,IAAkD;IACjE,MAAMxI,OAAO,GAAG;MACdyI,UAAU,EAAE,CAAE,IAAF,EAAQ,KAAR,CADE;MAEdrI,OAAO,EAAE,CACN,gBADM,EAEN,oBAFM,EAGPsI,sDAHO,CAFK;MAOd,GAAG,IAAAC,0BAAA,EAAaH,MAAb,EAAqB7I,MAAM,CAACyD,UAAP,KAAuB,WAA5C;IAPW,CAAhB,CADiE,CAUjE;;IACA,OAAO,IAAIwF,4BAAJ,CAAiB5I,OAAjB,CAAP;EACD,CAZD;;EAcA+B,OAAO,CAAC8G,cAAR,GAAyB,MAA6B;IACpD,MAAM7I,OAAO,GAAG;MACdyI,UAAU,EAAE,CAAE,IAAF,EAAQ,KAAR,CADE;MAEdrI,OAAO,EAAE,CACN,gBADM,EAEN,oBAFM,EAGPsI,sDAHO,CAFK;MAOd,GAAGI;IAPW,CAAhB,CADoD,CAUpD;;IACA,OAAO,IAAIF,4BAAJ,CAAiB5I,OAAjB,CAAP;EACD,CAZD;;EAcA,OAAO;IACLK,OADK;IAELuD,KAFK;IAGL7B;EAHK,CAAP;AAKD,CA7oBM"}