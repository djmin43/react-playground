{"version":3,"file":"jaeger-local.js","names":["tracer","create","config","serviceName","reporter","collectorEndpoint","sampler","type","param","options","initTracer","stop","Promise","resolve","close"],"sources":["../../../src/utils/tracer/jaeger-local.ts"],"sourcesContent":["import { initTracer, JaegerTracer, TracingConfig } from \"jaeger-client\"\n\nlet tracer: JaegerTracer\n\nfunction create(): JaegerTracer {\n  // See schema\n  // https://github.com/jaegertracing/jaeger-client-node/blob/master/src/configuration.js#L37\n  const config: TracingConfig = {\n    serviceName: `gatsby`,\n    reporter: {\n      // Provide the traces endpoint; this forces the client to\n      // connect directly to the Collector and send spans over HTTP\n      collectorEndpoint: `http://localhost:14268/api/traces`,\n    },\n    sampler: {\n      type: `const`,\n      param: 1,\n    },\n  }\n  const options = {}\n  tracer = initTracer(config, options)\n  return tracer\n}\n\nfunction stop(): Promise<void> {\n  return new Promise(resolve => {\n    tracer.close(resolve)\n  })\n}\n\nexport { create, stop }\n"],"mappings":";;;;;;AAAA;;AAEA,IAAIA,MAAJ;;AAEA,SAASC,MAAT,GAAgC;EAC9B;EACA;EACA,MAAMC,MAAqB,GAAG;IAC5BC,WAAW,EAAG,QADc;IAE5BC,QAAQ,EAAE;MACR;MACA;MACAC,iBAAiB,EAAG;IAHZ,CAFkB;IAO5BC,OAAO,EAAE;MACPC,IAAI,EAAG,OADA;MAEPC,KAAK,EAAE;IAFA;EAPmB,CAA9B;EAYA,MAAMC,OAAO,GAAG,EAAhB;EACAT,MAAM,GAAG,IAAAU,wBAAA,EAAWR,MAAX,EAAmBO,OAAnB,CAAT;EACA,OAAOT,MAAP;AACD;;AAED,SAASW,IAAT,GAA+B;EAC7B,OAAO,IAAIC,OAAJ,CAAYC,OAAO,IAAI;IAC5Bb,MAAM,CAACc,KAAP,CAAaD,OAAb;EACD,CAFM,CAAP;AAGD"}