{"version":3,"file":"clear-require-cache.js","names":["clearRequireCacheRecursively","module","ignoreNodeModules","resolvedModule","require","resolve","cacheEntry","cache","includes","parent","index","children","findIndex","c","filename","splice","forEach"],"sources":["../../src/utils/clear-require-cache.ts"],"sourcesContent":["export function clearRequireCacheRecursively(\n  module: string,\n  ignoreNodeModules: boolean = true\n): void {\n  const resolvedModule = require.resolve(module)\n  const cacheEntry = require.cache[resolvedModule]\n  if (!cacheEntry) {\n    return\n  }\n  if (ignoreNodeModules && resolvedModule.includes(`node_modules`)) {\n    return\n  }\n  delete require.cache[resolvedModule]\n\n  const parent = cacheEntry.parent\n  if (parent) {\n    const index = parent.children.findIndex(c => c.filename === resolvedModule)\n    if (index !== -1) {\n      parent.children.splice(index, 1)\n    }\n  }\n  cacheEntry.children.forEach(module =>\n    clearRequireCacheRecursively(module.filename, ignoreNodeModules)\n  )\n}\n"],"mappings":";;;;;AAAO,SAASA,4BAAT,CACLC,MADK,EAELC,iBAA0B,GAAG,IAFxB,EAGC;EACN,MAAMC,cAAc,GAAGC,OAAO,CAACC,OAAR,CAAgBJ,MAAhB,CAAvB;;EACA,MAAMK,UAAU,GAAGF,OAAO,CAACG,KAAR,CAAcJ,cAAd,CAAnB;;EACA,IAAI,CAACG,UAAL,EAAiB;IACf;EACD;;EACD,IAAIJ,iBAAiB,IAAIC,cAAc,CAACK,QAAf,CAAyB,cAAzB,CAAzB,EAAkE;IAChE;EACD;;EACD,OAAOJ,OAAO,CAACG,KAAR,CAAcJ,cAAd,CAAP;EAEA,MAAMM,MAAM,GAAGH,UAAU,CAACG,MAA1B;;EACA,IAAIA,MAAJ,EAAY;IACV,MAAMC,KAAK,GAAGD,MAAM,CAACE,QAAP,CAAgBC,SAAhB,CAA0BC,CAAC,IAAIA,CAAC,CAACC,QAAF,KAAeX,cAA9C,CAAd;;IACA,IAAIO,KAAK,KAAK,CAAC,CAAf,EAAkB;MAChBD,MAAM,CAACE,QAAP,CAAgBI,MAAhB,CAAuBL,KAAvB,EAA8B,CAA9B;IACD;EACF;;EACDJ,UAAU,CAACK,QAAX,CAAoBK,OAApB,CAA4Bf,MAAM,IAChCD,4BAA4B,CAACC,MAAM,CAACa,QAAR,EAAkBZ,iBAAlB,CAD9B;AAGD"}