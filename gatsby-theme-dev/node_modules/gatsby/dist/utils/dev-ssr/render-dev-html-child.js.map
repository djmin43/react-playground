{"version":3,"file":"render-dev-html-child.js","names":["renderHTML","path","componentPath","htmlComponentRendererPath","publicDir","isClientOnlyPage","error","undefined","directory","serverData","htmlComponentRenderer","require","process","env","GATSBY_EXPERIMENTAL_DEV_SSR","default","pagePath","err","parseError","deleteModuleCache","cache","resolve"],"sources":["../../../src/utils/dev-ssr/render-dev-html-child.ts"],"sourcesContent":["import { parseError, IErrorRenderMeta } from \"./parse-error\"\n\nimport type { IServerData } from \"../get-server-data\"\n\nexport async function renderHTML({\n  path,\n  componentPath,\n  htmlComponentRendererPath,\n  publicDir,\n  isClientOnlyPage = false,\n  error = undefined,\n  directory,\n  serverData,\n}: {\n  path: string\n  componentPath: string\n  htmlComponentRendererPath: string\n  publicDir: string\n  isClientOnlyPage?: boolean\n  error?: IErrorRenderMeta\n  directory: string\n  serverData?: IServerData[\"props\"]\n}): Promise<string> {\n  try {\n    const htmlComponentRenderer = require(htmlComponentRendererPath)\n    if (process.env.GATSBY_EXPERIMENTAL_DEV_SSR) {\n      return await htmlComponentRenderer.default({\n        pagePath: path,\n        isClientOnlyPage,\n        publicDir,\n        error,\n        serverData,\n      })\n    } else {\n      return await htmlComponentRenderer.default({\n        pagePath: path,\n        publicDir,\n        isClientOnlyPage: true,\n      })\n    }\n  } catch (err) {\n    const error = parseError({\n      err,\n      directory,\n      componentPath,\n      htmlComponentRendererPath,\n    })\n    throw error\n  }\n}\nexport function deleteModuleCache(htmlComponentRendererPath: string): void {\n  delete require.cache[require.resolve(htmlComponentRendererPath)]\n}\n"],"mappings":";;;;;;AAAA;;AAIO,eAAeA,UAAf,CAA0B;EAC/BC,IAD+B;EAE/BC,aAF+B;EAG/BC,yBAH+B;EAI/BC,SAJ+B;EAK/BC,gBAAgB,GAAG,KALY;EAM/BC,KAAK,GAAGC,SANuB;EAO/BC,SAP+B;EAQ/BC;AAR+B,CAA1B,EAkBa;EAClB,IAAI;IACF,MAAMC,qBAAqB,GAAGC,OAAO,CAACR,yBAAD,CAArC;;IACA,IAAIS,OAAO,CAACC,GAAR,CAAYC,2BAAhB,EAA6C;MAC3C,OAAO,MAAMJ,qBAAqB,CAACK,OAAtB,CAA8B;QACzCC,QAAQ,EAAEf,IAD+B;QAEzCI,gBAFyC;QAGzCD,SAHyC;QAIzCE,KAJyC;QAKzCG;MALyC,CAA9B,CAAb;IAOD,CARD,MAQO;MACL,OAAO,MAAMC,qBAAqB,CAACK,OAAtB,CAA8B;QACzCC,QAAQ,EAAEf,IAD+B;QAEzCG,SAFyC;QAGzCC,gBAAgB,EAAE;MAHuB,CAA9B,CAAb;IAKD;EACF,CAjBD,CAiBE,OAAOY,GAAP,EAAY;IACZ,MAAMX,KAAK,GAAG,IAAAY,sBAAA,EAAW;MACvBD,GADuB;MAEvBT,SAFuB;MAGvBN,aAHuB;MAIvBC;IAJuB,CAAX,CAAd;IAMA,MAAMG,KAAN;EACD;AACF;;AACM,SAASa,iBAAT,CAA2BhB,yBAA3B,EAAoE;EACzE,OAAOQ,OAAO,CAACS,KAAR,CAAcT,OAAO,CAACU,OAAR,CAAgBlB,yBAAhB,CAAd,CAAP;AACD"}