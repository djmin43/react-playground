{"version":3,"file":"no-anonymous-exports-page-templates.js","names":["defs","ArrowFunctionExpression","messageId","FunctionDeclaration","forbid","node","declaration","id","ClassDeclaration","noAnonymousExports","meta","type","messages","anonymousArrowFunction","anonymousFunctionDeclaration","anonymousClass","create","context","isPageTemplate","store","ExportDefaultDeclaration","def","report","module","exports"],"sources":["../../../src/utils/eslint-rules/no-anonymous-exports-page-templates.ts"],"sourcesContent":["import { Rule } from \"eslint\"\nimport { Node, ExportDefaultDeclaration } from \"estree\"\nimport { store } from \"../../redux\"\nimport { isPageTemplate } from \"../eslint-rules-helpers\"\n\nconst defs = {\n  ArrowFunctionExpression: {\n    messageId: `anonymousArrowFunction`,\n  },\n  FunctionDeclaration: {\n    messageId: `anonymousFunctionDeclaration`,\n    forbid: (node): boolean => !node.declaration.id,\n  },\n  ClassDeclaration: {\n    messageId: `anonymousClass`,\n    forbid: (node): boolean => !node.declaration.id,\n  },\n}\n\nconst noAnonymousExports: Rule.RuleModule = {\n  meta: {\n    type: `problem`,\n    messages: {\n      anonymousArrowFunction: `Anonymous arrow functions cause Fast Refresh to not preserve local component state.\n\n       Please add a name to your function, for example:\n\n       Before:\n       export default () => {}\n\n       After:\n       const Named = () => {}\n       export default Named;\n`,\n      anonymousFunctionDeclaration: `Anonymous function declarations cause Fast Refresh to not preserve local component state.\n\n       Please add a name to your function, for example:\n\n       Before:\n       export default function () {}\n\n       After:\n       export default function Named() {}\n`,\n      anonymousClass: `Anonymous classes cause Fast Refresh to not preserve local component state.\n\n       Please add a name to your class, for example:\n\n       Before:\n       export default class extends Component {}\n\n       After:\n       export default class Named extends Component {}\n`,\n    },\n  },\n  create: context => {\n    if (!isPageTemplate(store, context)) {\n      return {}\n    }\n\n    return {\n      ExportDefaultDeclaration: (node: Node): void => {\n        // @ts-ignore\n        const type = node.declaration.type as ExportDefaultDeclaration[\"type\"]\n        const def = defs[type]\n\n        if (def && (!def.forbid || def.forbid(node))) {\n          context.report({\n            node,\n            messageId: def.messageId,\n          })\n        }\n      },\n    }\n  },\n}\n\nmodule.exports = noAnonymousExports\n"],"mappings":";;AAEA;;AACA;;AAEA,MAAMA,IAAI,GAAG;EACXC,uBAAuB,EAAE;IACvBC,SAAS,EAAG;EADW,CADd;EAIXC,mBAAmB,EAAE;IACnBD,SAAS,EAAG,8BADO;IAEnBE,MAAM,EAAGC,IAAD,IAAmB,CAACA,IAAI,CAACC,WAAL,CAAiBC;EAF1B,CAJV;EAQXC,gBAAgB,EAAE;IAChBN,SAAS,EAAG,gBADI;IAEhBE,MAAM,EAAGC,IAAD,IAAmB,CAACA,IAAI,CAACC,WAAL,CAAiBC;EAF7B;AARP,CAAb;AAcA,MAAME,kBAAmC,GAAG;EAC1CC,IAAI,EAAE;IACJC,IAAI,EAAG,SADH;IAEJC,QAAQ,EAAE;MACRC,sBAAsB,EAAG;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAXc;MAYRC,4BAA4B,EAAG;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CArBc;MAsBRC,cAAc,EAAG;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IA/Bc;EAFN,CADoC;EAqC1CC,MAAM,EAAEC,OAAO,IAAI;IACjB,IAAI,CAAC,IAAAC,kCAAA,EAAeC,YAAf,EAAsBF,OAAtB,CAAL,EAAqC;MACnC,OAAO,EAAP;IACD;;IAED,OAAO;MACLG,wBAAwB,EAAGf,IAAD,IAAsB;QAC9C;QACA,MAAMM,IAAI,GAAGN,IAAI,CAACC,WAAL,CAAiBK,IAA9B;QACA,MAAMU,GAAG,GAAGrB,IAAI,CAACW,IAAD,CAAhB;;QAEA,IAAIU,GAAG,KAAK,CAACA,GAAG,CAACjB,MAAL,IAAeiB,GAAG,CAACjB,MAAJ,CAAWC,IAAX,CAApB,CAAP,EAA8C;UAC5CY,OAAO,CAACK,MAAR,CAAe;YACbjB,IADa;YAEbH,SAAS,EAAEmB,GAAG,CAACnB;UAFF,CAAf;QAID;MACF;IAZI,CAAP;EAcD;AAxDyC,CAA5C;AA2DAqB,MAAM,CAACC,OAAP,GAAiBf,kBAAjB"}