{"version":3,"file":"mett.js","names":["mett","mettEvents","Map","on","eventName","callback","set","get","add","Set","off","delete","emit","e","setName","forEach","mettEmitEachC","setStar","mettEmitEachStar"],"sources":["../../src/utils/mett.ts"],"sourcesContent":["// This is a simple event emitter based on mitt.js\n// It mainly changes the data model to use a Map and Set, rather than a\n// regular object and an array.\n\ntype MettHandler<EventName, Payload> = (\n  e: Payload,\n  eventName: EventName\n) => void\n\nexport interface IMett {\n  on(eventName: EventName, callback: MettHandler<EventName, Payload>): void\n  off(eventName: EventName, callback: MettHandler<EventName, Payload>): void\n  emit(eventName: EventName, e?: Payload): void\n}\n\ntype EventName = string\ntype Payload = any\n\nexport function mett(): IMett {\n  const mettEvents: Map<\n    EventName,\n    Set<MettHandler<EventName, Payload>>\n  > = new Map()\n\n  return {\n    on(eventName: EventName, callback: MettHandler<EventName, Payload>): void {\n      const set = mettEvents.get(eventName)\n      if (set) {\n        set.add(callback)\n      } else {\n        mettEvents.set(eventName, new Set([callback]))\n      }\n    },\n    off(eventName: EventName, callback: MettHandler<EventName, Payload>): void {\n      const set = mettEvents.get(eventName)\n      if (set) {\n        set.delete(callback)\n      }\n    },\n    emit(eventName: EventName, e: Payload): void {\n      const setName = mettEvents.get(eventName)\n      if (setName) {\n        setName.forEach(function mettEmitEachC(callback) {\n          callback(e, eventName)\n        })\n      }\n      const setStar = mettEvents.get(`*`)\n      if (setStar) {\n        setStar.forEach(function mettEmitEachStar(callback) {\n          callback(e, eventName)\n        })\n      }\n    },\n  }\n}\n"],"mappings":";;;;;AAAA;AACA;AACA;AAgBO,SAASA,IAAT,GAAuB;EAC5B,MAAMC,UAGL,GAAG,IAAIC,GAAJ,EAHJ;EAKA,OAAO;IACLC,EAAE,CAACC,SAAD,EAAuBC,QAAvB,EAAwE;MACxE,MAAMC,GAAG,GAAGL,UAAU,CAACM,GAAX,CAAeH,SAAf,CAAZ;;MACA,IAAIE,GAAJ,EAAS;QACPA,GAAG,CAACE,GAAJ,CAAQH,QAAR;MACD,CAFD,MAEO;QACLJ,UAAU,CAACK,GAAX,CAAeF,SAAf,EAA0B,IAAIK,GAAJ,CAAQ,CAACJ,QAAD,CAAR,CAA1B;MACD;IACF,CARI;;IASLK,GAAG,CAACN,SAAD,EAAuBC,QAAvB,EAAwE;MACzE,MAAMC,GAAG,GAAGL,UAAU,CAACM,GAAX,CAAeH,SAAf,CAAZ;;MACA,IAAIE,GAAJ,EAAS;QACPA,GAAG,CAACK,MAAJ,CAAWN,QAAX;MACD;IACF,CAdI;;IAeLO,IAAI,CAACR,SAAD,EAAuBS,CAAvB,EAAyC;MAC3C,MAAMC,OAAO,GAAGb,UAAU,CAACM,GAAX,CAAeH,SAAf,CAAhB;;MACA,IAAIU,OAAJ,EAAa;QACXA,OAAO,CAACC,OAAR,CAAgB,SAASC,aAAT,CAAuBX,QAAvB,EAAiC;UAC/CA,QAAQ,CAACQ,CAAD,EAAIT,SAAJ,CAAR;QACD,CAFD;MAGD;;MACD,MAAMa,OAAO,GAAGhB,UAAU,CAACM,GAAX,CAAgB,GAAhB,CAAhB;;MACA,IAAIU,OAAJ,EAAa;QACXA,OAAO,CAACF,OAAR,CAAgB,SAASG,gBAAT,CAA0Bb,QAA1B,EAAoC;UAClDA,QAAQ,CAACQ,CAAD,EAAIT,SAAJ,CAAR;QACD,CAFD;MAGD;IACF;;EA5BI,CAAP;AA8BD"}