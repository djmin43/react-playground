{"version":3,"file":"browserslist.js","names":["installedGatsbyVersion","directory","version","require","path","join","parseInt","split","e","undefined","getBrowsersList","fallback","config","browserslist","findConfig","defaults","hasES6ModuleSupport","query","length"],"sources":["../../src/utils/browserslist.ts"],"sourcesContent":["import path from \"path\"\nimport browserslist from \"browserslist/node\"\nimport query from \"browserslist\"\n\nconst installedGatsbyVersion = (directory: string): number | undefined => {\n  try {\n    // eslint-disable-next-line @typescript-eslint/no-var-requires\n    const { version } = require(path.join(\n      directory,\n      `node_modules`,\n      `gatsby`,\n      `package.json`\n    ))\n    return parseInt(version.split(`.`)[0], 10)\n  } catch (e) {\n    return undefined\n  }\n}\n\nexport const getBrowsersList = (directory: string): Array<string> => {\n  const fallback =\n    installedGatsbyVersion(directory) === 1\n      ? [`>1%`, `last 2 versions`, `IE >= 9`]\n      : [`>0.25%`, `not dead`]\n\n  const config = browserslist.findConfig(directory)\n\n  if (config && config.defaults) {\n    return config.defaults\n  }\n\n  return fallback\n}\n\nexport const hasES6ModuleSupport = (directory: string): boolean => {\n  const browserslist = getBrowsersList(directory)\n  return query(browserslist + `, not supports es6-module`).length === 0\n}\n"],"mappings":";;;;;;;AAAA;;AACA;;AACA;;AAEA,MAAMA,sBAAsB,GAAIC,SAAD,IAA2C;EACxE,IAAI;IACF;IACA,MAAM;MAAEC;IAAF,IAAcC,OAAO,CAACC,aAAA,CAAKC,IAAL,CAC1BJ,SAD0B,EAEzB,cAFyB,EAGzB,QAHyB,EAIzB,cAJyB,CAAD,CAA3B;;IAMA,OAAOK,QAAQ,CAACJ,OAAO,CAACK,KAAR,CAAe,GAAf,EAAmB,CAAnB,CAAD,EAAwB,EAAxB,CAAf;EACD,CATD,CASE,OAAOC,CAAP,EAAU;IACV,OAAOC,SAAP;EACD;AACF,CAbD;;AAeO,MAAMC,eAAe,GAAIT,SAAD,IAAsC;EACnE,MAAMU,QAAQ,GACZX,sBAAsB,CAACC,SAAD,CAAtB,KAAsC,CAAtC,GACI,CAAE,KAAF,EAAS,iBAAT,EAA4B,SAA5B,CADJ,GAEI,CAAE,QAAF,EAAY,UAAZ,CAHN;;EAKA,MAAMW,MAAM,GAAGC,aAAA,CAAaC,UAAb,CAAwBb,SAAxB,CAAf;;EAEA,IAAIW,MAAM,IAAIA,MAAM,CAACG,QAArB,EAA+B;IAC7B,OAAOH,MAAM,CAACG,QAAd;EACD;;EAED,OAAOJ,QAAP;AACD,CAbM;;;;AAeA,MAAMK,mBAAmB,GAAIf,SAAD,IAAgC;EACjE,MAAMY,YAAY,GAAGH,eAAe,CAACT,SAAD,CAApC;EACA,OAAO,IAAAgB,qBAAA,EAAMJ,YAAY,GAAI,2BAAtB,EAAkDK,MAAlD,KAA6D,CAApE;AACD,CAHM"}