{"version":3,"file":"graphql-typegen.js","names":["graphQLTypegen","program","store","parentSpan","reporter","Error","directory","activity","activityTimer","start","schema","definitions","config","getState","graphqlTypegenOptions","graphqlTypegen","writeGraphQLSchema","writeGraphQLFragments","writeTypeScriptTypes","err","panicOnBuild","id","context","sourceMessage","end"],"sources":["../../src/services/graphql-typegen.ts"],"sourcesContent":["import { IBuildContext } from \"../internal\"\nimport {\n  writeGraphQLFragments,\n  writeGraphQLSchema,\n} from \"../utils/graphql-typegen/file-writes\"\nimport { writeTypeScriptTypes } from \"../utils/graphql-typegen/ts-codegen\"\n\nexport async function graphQLTypegen({\n  program,\n  store,\n  parentSpan,\n  reporter,\n}: IBuildContext): Promise<void> {\n  // TypeScript requires null/undefined checks for these\n  // But this should never happen unless e.g. the state machine doesn't receive this information from a parent state machine\n  if (!program || !store || !reporter) {\n    throw new Error(\n      `Missing required params in graphQLTypegen. program: ${!!program}. store: ${!!store}.`\n    )\n  }\n  const directory = program.directory\n\n  const activity = reporter.activityTimer(\n    `Generating GraphQL and TypeScript types`,\n    {\n      parentSpan,\n    }\n  )\n  activity.start()\n\n  const { schema, definitions, config } = store.getState()\n  const graphqlTypegenOptions = config.graphqlTypegen\n\n  if (!graphqlTypegenOptions) {\n    throw new Error(`graphqlTypegen option is falsy. This should never happen.`)\n  }\n\n  try {\n    await writeGraphQLSchema(directory, schema)\n    await writeGraphQLFragments(directory, definitions)\n    await writeTypeScriptTypes(\n      directory,\n      schema,\n      definitions,\n      graphqlTypegenOptions\n    )\n  } catch (err) {\n    activity.panicOnBuild({\n      id: `12100`,\n      context: {\n        sourceMessage: err,\n      },\n    })\n  }\n\n  activity.end()\n}\n"],"mappings":";;;;;AACA;;AAIA;;AAEO,eAAeA,cAAf,CAA8B;EACnCC,OADmC;EAEnCC,KAFmC;EAGnCC,UAHmC;EAInCC;AAJmC,CAA9B,EAK0B;EAC/B;EACA;EACA,IAAI,CAACH,OAAD,IAAY,CAACC,KAAb,IAAsB,CAACE,QAA3B,EAAqC;IACnC,MAAM,IAAIC,KAAJ,CACH,uDAAsD,CAAC,CAACJ,OAAQ,YAAW,CAAC,CAACC,KAAM,GADhF,CAAN;EAGD;;EACD,MAAMI,SAAS,GAAGL,OAAO,CAACK,SAA1B;EAEA,MAAMC,QAAQ,GAAGH,QAAQ,CAACI,aAAT,CACd,yCADc,EAEf;IACEL;EADF,CAFe,CAAjB;EAMAI,QAAQ,CAACE,KAAT;EAEA,MAAM;IAAEC,MAAF;IAAUC,WAAV;IAAuBC;EAAvB,IAAkCV,KAAK,CAACW,QAAN,EAAxC;EACA,MAAMC,qBAAqB,GAAGF,MAAM,CAACG,cAArC;;EAEA,IAAI,CAACD,qBAAL,EAA4B;IAC1B,MAAM,IAAIT,KAAJ,CAAW,2DAAX,CAAN;EACD;;EAED,IAAI;IACF,MAAM,IAAAW,8BAAA,EAAmBV,SAAnB,EAA8BI,MAA9B,CAAN;IACA,MAAM,IAAAO,iCAAA,EAAsBX,SAAtB,EAAiCK,WAAjC,CAAN;IACA,MAAM,IAAAO,+BAAA,EACJZ,SADI,EAEJI,MAFI,EAGJC,WAHI,EAIJG,qBAJI,CAAN;EAMD,CATD,CASE,OAAOK,GAAP,EAAY;IACZZ,QAAQ,CAACa,YAAT,CAAsB;MACpBC,EAAE,EAAG,OADe;MAEpBC,OAAO,EAAE;QACPC,aAAa,EAAEJ;MADR;IAFW,CAAtB;EAMD;;EAEDZ,QAAQ,CAACiB,GAAT;AACD"}