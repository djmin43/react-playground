{"version":3,"file":"listen-for-mutations.js","names":["listenForMutations","callback","emitMutation","event","type","payload","emitSourceChange","emitWebhook","emitQueryRunRequest","emitSetSchema","emitGraphQLDefinitions","emitter","on","unsubscribeFromMutationListening","off"],"sources":["../../src/services/listen-for-mutations.ts"],"sourcesContent":["import { emitter } from \"../redux\"\nimport { InvokeCallback, Sender } from \"xstate\"\n\nexport const listenForMutations: InvokeCallback = (callback: Sender<any>) => {\n  const emitMutation = (event: unknown): void => {\n    callback({ type: `ADD_NODE_MUTATION`, payload: event })\n  }\n\n  const emitSourceChange = (event: unknown): void => {\n    callback({ type: `SOURCE_FILE_CHANGED`, payload: event })\n  }\n\n  const emitWebhook = (event: unknown): void => {\n    callback({ type: `WEBHOOK_RECEIVED`, payload: event })\n  }\n\n  const emitQueryRunRequest = (event: unknown): void => {\n    callback({ type: `QUERY_RUN_REQUESTED`, payload: event })\n  }\n\n  const emitSetSchema = (event: unknown): void => {\n    callback({ type: `SET_SCHEMA`, payload: event })\n  }\n\n  const emitGraphQLDefinitions = (event: unknown): void => {\n    callback({ type: `SET_GRAPHQL_DEFINITIONS`, payload: event })\n  }\n\n  emitter.on(`ENQUEUE_NODE_MUTATION`, emitMutation)\n  emitter.on(`WEBHOOK_RECEIVED`, emitWebhook)\n  emitter.on(`SOURCE_FILE_CHANGED`, emitSourceChange)\n  emitter.on(`QUERY_RUN_REQUESTED`, emitQueryRunRequest)\n  emitter.on(`SET_SCHEMA`, emitSetSchema)\n  emitter.on(`SET_GRAPHQL_DEFINITIONS`, emitGraphQLDefinitions)\n\n  return function unsubscribeFromMutationListening(): void {\n    emitter.off(`ENQUEUE_NODE_MUTATION`, emitMutation)\n    emitter.off(`WEBHOOK_RECEIVED`, emitWebhook)\n    emitter.off(`SOURCE_FILE_CHANGED`, emitSourceChange)\n    emitter.off(`QUERY_RUN_REQUESTED`, emitQueryRunRequest)\n    emitter.off(`SET_SCHEMA`, emitSetSchema)\n    emitter.off(`SET_GRAPHQL_DEFINITIONS`, emitGraphQLDefinitions)\n  }\n}\n"],"mappings":";;;;;AAAA;;AAGO,MAAMA,kBAAkC,GAAIC,QAAD,IAA2B;EAC3E,MAAMC,YAAY,GAAIC,KAAD,IAA0B;IAC7CF,QAAQ,CAAC;MAAEG,IAAI,EAAG,mBAAT;MAA6BC,OAAO,EAAEF;IAAtC,CAAD,CAAR;EACD,CAFD;;EAIA,MAAMG,gBAAgB,GAAIH,KAAD,IAA0B;IACjDF,QAAQ,CAAC;MAAEG,IAAI,EAAG,qBAAT;MAA+BC,OAAO,EAAEF;IAAxC,CAAD,CAAR;EACD,CAFD;;EAIA,MAAMI,WAAW,GAAIJ,KAAD,IAA0B;IAC5CF,QAAQ,CAAC;MAAEG,IAAI,EAAG,kBAAT;MAA4BC,OAAO,EAAEF;IAArC,CAAD,CAAR;EACD,CAFD;;EAIA,MAAMK,mBAAmB,GAAIL,KAAD,IAA0B;IACpDF,QAAQ,CAAC;MAAEG,IAAI,EAAG,qBAAT;MAA+BC,OAAO,EAAEF;IAAxC,CAAD,CAAR;EACD,CAFD;;EAIA,MAAMM,aAAa,GAAIN,KAAD,IAA0B;IAC9CF,QAAQ,CAAC;MAAEG,IAAI,EAAG,YAAT;MAAsBC,OAAO,EAAEF;IAA/B,CAAD,CAAR;EACD,CAFD;;EAIA,MAAMO,sBAAsB,GAAIP,KAAD,IAA0B;IACvDF,QAAQ,CAAC;MAAEG,IAAI,EAAG,yBAAT;MAAmCC,OAAO,EAAEF;IAA5C,CAAD,CAAR;EACD,CAFD;;EAIAQ,cAAA,CAAQC,EAAR,CAAY,uBAAZ,EAAoCV,YAApC;;EACAS,cAAA,CAAQC,EAAR,CAAY,kBAAZ,EAA+BL,WAA/B;;EACAI,cAAA,CAAQC,EAAR,CAAY,qBAAZ,EAAkCN,gBAAlC;;EACAK,cAAA,CAAQC,EAAR,CAAY,qBAAZ,EAAkCJ,mBAAlC;;EACAG,cAAA,CAAQC,EAAR,CAAY,YAAZ,EAAyBH,aAAzB;;EACAE,cAAA,CAAQC,EAAR,CAAY,yBAAZ,EAAsCF,sBAAtC;;EAEA,OAAO,SAASG,gCAAT,GAAkD;IACvDF,cAAA,CAAQG,GAAR,CAAa,uBAAb,EAAqCZ,YAArC;;IACAS,cAAA,CAAQG,GAAR,CAAa,kBAAb,EAAgCP,WAAhC;;IACAI,cAAA,CAAQG,GAAR,CAAa,qBAAb,EAAmCR,gBAAnC;;IACAK,cAAA,CAAQG,GAAR,CAAa,qBAAb,EAAmCN,mBAAnC;;IACAG,cAAA,CAAQG,GAAR,CAAa,YAAb,EAA0BL,aAA1B;;IACAE,cAAA,CAAQG,GAAR,CAAa,yBAAb,EAAuCJ,sBAAvC;EACD,CAPD;AAQD,CAxCM"}