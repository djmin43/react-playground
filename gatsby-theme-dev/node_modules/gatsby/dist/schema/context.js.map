{"version":3,"file":"context.js","names":["withResolverContext","schema","schemaComposer","context","customContext","nodeModel","stats","tracer","telemetryResolverTimings","LocalNodeModel","createPageDependency","defaultFieldResolver","withContext","path","undefined","module","exports"],"sources":["../../src/schema/context.ts"],"sourcesContent":["import { GraphQLSchema } from \"graphql\"\nimport { SchemaComposer } from \"graphql-compose\"\n\nimport { createPageDependency } from \"../redux/actions/add-page-dependency\"\nimport { LocalNodeModel } from \"./node-model\"\nimport { defaultFieldResolver } from \"./resolvers\"\nimport { IGraphQLRunnerStats } from \"../query/types\"\nimport {\n  IGatsbyResolverContext,\n  IGraphQLSpanTracer,\n  IGraphQLTelemetryRecord,\n} from \"./type-definitions\"\n\nexport default function withResolverContext<TSource, TArgs>({\n  schema,\n  schemaComposer,\n  context,\n  customContext,\n  nodeModel,\n  stats,\n  tracer,\n  telemetryResolverTimings,\n}: {\n  schema: GraphQLSchema\n  schemaComposer: SchemaComposer<IGatsbyResolverContext<TSource, TArgs>> | null\n  context?: Record<string, any>\n  customContext?: Record<string, any>\n  nodeModel?: any\n  stats?: IGraphQLRunnerStats | null\n  tracer?: IGraphQLSpanTracer\n  telemetryResolverTimings?: Array<IGraphQLTelemetryRecord>\n}): IGatsbyResolverContext<TSource, TArgs> {\n  if (!nodeModel) {\n    nodeModel = new LocalNodeModel({\n      schema,\n      schemaComposer,\n      createPageDependency,\n    })\n  }\n\n  return {\n    ...(context || {}),\n    ...(customContext || {}),\n    defaultFieldResolver,\n    nodeModel: nodeModel.withContext({\n      path: context ? context.path : undefined,\n    }),\n    stats: stats || null,\n    tracer: tracer || null,\n    telemetryResolverTimings,\n  }\n}\n\nmodule.exports = withResolverContext\n"],"mappings":";;;;;AAGA;;AACA;;AACA;;AAQe,SAASA,mBAAT,CAA6C;EAC1DC,MAD0D;EAE1DC,cAF0D;EAG1DC,OAH0D;EAI1DC,aAJ0D;EAK1DC,SAL0D;EAM1DC,KAN0D;EAO1DC,MAP0D;EAQ1DC;AAR0D,CAA7C,EAkB4B;EACzC,IAAI,CAACH,SAAL,EAAgB;IACdA,SAAS,GAAG,IAAII,yBAAJ,CAAmB;MAC7BR,MAD6B;MAE7BC,cAF6B;MAG7BQ,oBAAoB,EAApBA;IAH6B,CAAnB,CAAZ;EAKD;;EAED,OAAO,EACL,IAAIP,OAAO,IAAI,EAAf,CADK;IAEL,IAAIC,aAAa,IAAI,EAArB,CAFK;IAGLO,oBAAoB,EAApBA,+BAHK;IAILN,SAAS,EAAEA,SAAS,CAACO,WAAV,CAAsB;MAC/BC,IAAI,EAAEV,OAAO,GAAGA,OAAO,CAACU,IAAX,GAAkBC;IADA,CAAtB,CAJN;IAOLR,KAAK,EAAEA,KAAK,IAAI,IAPX;IAQLC,MAAM,EAAEA,MAAM,IAAI,IARb;IASLC;EATK,CAAP;AAWD;;AAEDO,MAAM,CAACC,OAAP,GAAiBhB,mBAAjB"}