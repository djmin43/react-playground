{"version":3,"file":"proxy.js","names":["thirdPartyProxyPath","partytownProxy","partytownProxiedURLs","proxy","req","URL","query","url","origin","filter","some","proxyReqPathResolver","pathname","search"],"sources":["../../../src/internal-plugins/partytown/proxy.ts"],"sourcesContent":["import proxy from \"express-http-proxy\"\nimport type { RequestHandler } from \"express\"\n\nexport const thirdPartyProxyPath = `/__third-party-proxy`\n\nexport function partytownProxy(\n  partytownProxiedURLs: Array<string>\n): RequestHandler {\n  return proxy(req => new URL(req.query.url as string).origin as string, {\n    filter: req => partytownProxiedURLs.some(url => req.query?.url === url),\n    proxyReqPathResolver: req => {\n      const { pathname = ``, search = `` } = new URL(req.query?.url as string)\n      return pathname + search\n    },\n  })\n}\n"],"mappings":";;;;;;;;AAAA;;AAGO,MAAMA,mBAAmB,GAAI,sBAA7B;;;AAEA,SAASC,cAAT,CACLC,oBADK,EAEW;EAChB,OAAO,IAAAC,yBAAA,EAAMC,GAAG,IAAI,IAAIC,GAAJ,CAAQD,GAAG,CAACE,KAAJ,CAAUC,GAAlB,EAAiCC,MAA9C,EAAgE;IACrEC,MAAM,EAAEL,GAAG,IAAIF,oBAAoB,CAACQ,IAArB,CAA0BH,GAAG;MAAA;;MAAA,OAAI,eAAAH,GAAG,CAACE,KAAJ,0DAAWC,GAAX,MAAmBA,GAAvB;IAAA,CAA7B,CADsD;IAErEI,oBAAoB,EAAEP,GAAG,IAAI;MAAA;;MAC3B,MAAM;QAAEQ,QAAQ,GAAI,EAAd;QAAiBC,MAAM,GAAI;MAA3B,IAAiC,IAAIR,GAAJ,gBAAQD,GAAG,CAACE,KAAZ,gDAAQ,YAAWC,GAAnB,CAAvC;MACA,OAAOK,QAAQ,GAAGC,MAAlB;IACD;EALoE,CAAhE,CAAP;AAOD"}