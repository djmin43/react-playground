{"version":3,"file":"gatsby-node.js","names":["path","require","exports","onCreateBabelConfig","actions","setBabelPlugin","name","onCreateWebpackConfig","stage","objectAssignStub","join","__dirname","noOp","fetchStub","whatwgFetchStub","alias","unfetch$","setWebpackConfig","resolve"],"sources":["../../../src/internal-plugins/bundle-optimisations/gatsby-node.js"],"sourcesContent":["const path = require(`path`)\n\nexports.onCreateBabelConfig = ({ actions }) => {\n  // rewrites import { get }from 'lodash' into import get from 'lodash/get';\n  actions.setBabelPlugin({\n    name: `babel-plugin-lodash`,\n  })\n}\n\nexports.onCreateWebpackConfig = function onCreateWebpackConfig({\n  stage,\n  actions,\n}) {\n  const objectAssignStub = path.join(__dirname, `polyfills/object-assign.js`)\n  const noOp = path.join(__dirname, `polyfills/no-op.js`)\n  const fetchStub = path.join(__dirname, `polyfills/fetch.js`)\n  const whatwgFetchStub = path.join(__dirname, `polyfills/whatwg-fetch.js`)\n\n  const alias = {\n    // These files are already polyfilled so these should return in a no-op\n    // Stub Package: object.assign & object-assign\n    \"object.assign\": objectAssignStub,\n    \"object-assign$\": objectAssignStub,\n    \"@babel/runtime/helpers/extends.js$\": objectAssignStub,\n    // Stub package: fetch\n    unfetch$: fetchStub,\n    \"unfetch/polyfill$\": noOp,\n    \"isomorphic-unfetch$\": fetchStub,\n    \"isomorphic-fetch$\": fetchStub,\n    \"whatwg-fetch$\": whatwgFetchStub,\n  }\n\n  if (stage === `build-javascript` || stage === `develop`) {\n    alias[`url-polyfill$`] = noOp\n  }\n\n  actions.setWebpackConfig({\n    resolve: {\n      alias,\n    },\n  })\n}\n"],"mappings":";;AAAA,MAAMA,IAAI,GAAGC,OAAO,CAAE,MAAF,CAApB;;AAEAC,OAAO,CAACC,mBAAR,GAA8B,CAAC;EAAEC;AAAF,CAAD,KAAiB;EAC7C;EACAA,OAAO,CAACC,cAAR,CAAuB;IACrBC,IAAI,EAAG;EADc,CAAvB;AAGD,CALD;;AAOAJ,OAAO,CAACK,qBAAR,GAAgC,SAASA,qBAAT,CAA+B;EAC7DC,KAD6D;EAE7DJ;AAF6D,CAA/B,EAG7B;EACD,MAAMK,gBAAgB,GAAGT,IAAI,CAACU,IAAL,CAAUC,SAAV,EAAsB,4BAAtB,CAAzB;EACA,MAAMC,IAAI,GAAGZ,IAAI,CAACU,IAAL,CAAUC,SAAV,EAAsB,oBAAtB,CAAb;EACA,MAAME,SAAS,GAAGb,IAAI,CAACU,IAAL,CAAUC,SAAV,EAAsB,oBAAtB,CAAlB;EACA,MAAMG,eAAe,GAAGd,IAAI,CAACU,IAAL,CAAUC,SAAV,EAAsB,2BAAtB,CAAxB;EAEA,MAAMI,KAAK,GAAG;IACZ;IACA;IACA,iBAAiBN,gBAHL;IAIZ,kBAAkBA,gBAJN;IAKZ,sCAAsCA,gBAL1B;IAMZ;IACAO,QAAQ,EAAEH,SAPE;IAQZ,qBAAqBD,IART;IASZ,uBAAuBC,SATX;IAUZ,qBAAqBA,SAVT;IAWZ,iBAAiBC;EAXL,CAAd;;EAcA,IAAIN,KAAK,KAAM,kBAAX,IAAgCA,KAAK,KAAM,SAA/C,EAAyD;IACvDO,KAAK,CAAE,eAAF,CAAL,GAAyBH,IAAzB;EACD;;EAEDR,OAAO,CAACa,gBAAR,CAAyB;IACvBC,OAAO,EAAE;MACPH;IADO;EADc,CAAzB;AAKD,CAhCD"}